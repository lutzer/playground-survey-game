{"version":3,"sources":["babylon/assets.ts","babylon/utils.ts","state.ts","assets/images/explorer.png","assets/images/builder.png","assets/images/two_kids.png","assets/images/check.png","assets/images/arrow_back.png","components/AvatarView.tsx","babylon/camera.ts","babylon/grid.ts","components/PlaygroundView.tsx","babylon/effects.ts","babylon/tiles.ts","babylon/tileManager.ts","babylon/playground.ts","babylon/helpers.ts","babylon/light.ts","assets/images/close.png","assets/images/icon_tile_trampolin.png","assets/images/icon_tile_boulders.png","assets/images/icon_tile_house.png","assets/images/icon_tile_caroussel.png","assets/images/icon_tile_sandbox.png","assets/images/icon_tile_seasaw.png","assets/images/icon_tile_swings.png","assets/images/icon_tile_slide.png","assets/images/icon_tile_tree.png","assets/images/icon_tile_playhut.png","assets/images/icon_tile_empty.png","assets/images/icon_tile_junglegym.png","assets/images/icon_tile_springs.png","components/TileMenu.tsx","components/LoadingView.tsx","assets/images/next.png","assets/images/previous.png","assets/images/icon_tile_grass.png","assets/images/fertig.png","components/HintView.tsx","assets/images/rotate_left.png","assets/images/rotate_right.png","assets/images/pool.png","assets/images/stream.png","components/WaterbodyView.tsx","assets/images/missingtile.png","components/MissingTileView.tsx","assets/images/send.png","assets/images/thankyou.png","components/FinishedView.tsx","assets/images/replay.png","components/StartView.tsx","assets/images/play.png","assets/images/lighttower.png","components/ImpressumView.tsx","App.tsx","index.tsx"],"names":["SelectableTiles","FixedTiles","fromHammerEvent","hammer","event","subject","Subject","on","e","next","pipe","share","easeInOut","t","animateValue","from","to","time","steps","callback","timeBetweenSteps","interval","scan","acc","takeWhile","subscribe","complete","snapTo","value","snapPositions","minBy","p","Math","abs","constrainRad","PI","PromiseResolveSerial","promises","a","results","push","onTaskCompleted","task","Promise","resolve","onSuccess","Actions","loadAssets","scene","playGroundType","assetsManager","AssetsManager","useDefaultLoadingScreen","addContainerTask","tree","grass","trampolin","swings","slide","sandbox","house","boulders","seasaw","carousel","playhut","junglegym","springs","pool","river","lighttower","alley1","alley2","trees1","trees2","addTextureTask","load","undefined","tasks","tileMeshes","filter","ContainerAssetTask","name","startsWith","map","reduce","mesh","loadedContainer","instantiateModelsToScene","rootNodes","fixedAnimationSpeed","Object","keys","includes","meshesNames","animations","loadedAnimationGroups","curr","stop","targetedAnimations","forEach","anim","animation","target","fixedSpeed","setEnabled","textures","TextureAssetTask","texture","Statemachine","settings","_state","_initialState","_settings","tiles","Array","gridSize","fill","v","i","type","rotation","_","sample","index","playgroundType","version","seed","floor","random","state","this","save","item","window","localStorage","getItem","STORAGE_KEY","data","JSON","parse","err","console","warn","setItem","stringify","cloneDeep","action","args","selectTile","selectedTile","id","setTileType","setAvatar","avatar","setPlaygroundType","setMissingText","text","missing","setupTile","descriptions","Map","set","title","img","explorerImage","builderImage","kidsImage","AvatarView","onSelect","history","useHistory","useState","selected","setSelected","avatars","shuffle","pathname","useLocation","renderAvatarImage","className","onClick","onAvatarSelect","src","useEffect","scrollTo","get","backIcon","checkIcon","ROTATION_SNAP_POSITIONS","OrthographicCamera","canvas","zoom","_cursor","_zoom","aspectRatio","_rotation","camera","$disposeObservable","_isAnimating","enableControl","Vector2","UniversalCamera","Vector3","mode","Camera","ORTHOGRAPHIC_CAMERA","getEngine","getAspectRatio","updateCameraFrame","updateCameraPosition","mc","Hammer","enable","threshold","$pinchStart","$pinchEnd","$pinchMove","$rotateStart","$rotateEnd","$rotateMove","switchMap","combineLatest","of","takeUntil","move","scale","start","skipWhile","rot","drot","$pointerDown","fromEvent","isPrimary","$pointerUp","$pointerMove","$pointerDownMultiple","down","clone","merge","matrix","point","cursor","dx","screenX","dy","screenY","mat","getRotationMatrix","dvec","zoomDivisor","setCameraCenter","x","y","sign","deltaY","orthoTop","orthoBottom","orthoRight","orthoLeft","position","cos","z","sin","setTarget","max","min","angle","done","createTree","cells","fixedTile","createLighttower","createAlley","LoadedState","createGrid","sizeX","sizeY","range","j","size","Fountain","particleSystem","isGpuSystem","GPUParticleSystem","IsSupported","gpuSystem","capacity","activeParticleCount","cpuSystem","ParticleSystem","particleTexture","emitter","createPointEmitter","color1","Color4","color2","colorDead","minSize","maxSize","minLifeTime","maxLifeTime","emitRate","gravity","minAngularSpeed","maxAngularSpeed","minEmitPower","maxEmitPower","updateSpeed","dispose","WaterLight","light","PointLight","intensity","diffuse","Color3","Tile","meshes","enterAnimation","node","_position","_type","_meshes","_textures","_scene","_effects","_animation","_enterAnimation","_isEntering","TransformNode","empty","getAbsolutePosition","add","instantiateHierarchy","AnimationGroup","targetNode","getChildren","find","addTargetedAnimation","speed","doNotSyncBoundingInfo","beginDirectAnimation","rotate","TileCursor","utilLayer","_selectLayer","_selectMarker","MeshBuilder","CreateBox","width","height","depth","utilityLayerScene","material","StandardMaterial","diffuseColor","specularColor","alpha","alphaMode","Engine","ALPHA_MAXIMIZED","shouldRender","isPickable","translate","bakeCurrentTransformIntoVertices","pos","TileManager","grid","_assets","$pointerDownObservable","$pointerUpObservable","UtilityLayerRenderer","HemisphericLight","setupPointerObservables","onPointerObservable","pInfo","PointerEventTypes","POINTERDOWN","POINTERUP","$onDownPicked","pick","offsetX","offsetY","Date","now","withLatestFrom","up","dist","hit","pickedMesh","emit","metadata","tileIndex","ySlideAnimation","Animation","ANIMATIONTYPE_FLOAT","ANIMATIONLOOPMODE_CONSTANT","setKeys","frame","tile","show","box","selectable","visibility","currState","prevState","differenceWith","isEqual","tileState","EventEmitter","Playground","stateMachine","engine","enablePointerEvents","BABYLON","preserveDrawingBuffer","stencil","onPrePointerObservable","pointerInfo","skipOnPointerObservable","stopRenderLoop","onLoaded","ox","oy","createPlanscheGrid","createRiverGrid","tileManager","trigger","pairwise","prev","handleTileChange","distinctUntilChanged","setSelectMarker","fromPromise","setup","autoClear","autoClearDepthAndStencil","freeActiveMeshes","blockMaterialDirtyMechanism","attachControl","groundColor","dirLight","DirectionalLight","setDirectionToTarget","setupLights","yOffset","ground","CreateGround","groundMaterial","Texture","uScale","vScale","diffuseTexture","addMesh","gridMaterial","GridMaterial","majorUnitFrequency","minorUnitVisibility","gridRatio","backFaceCulling","mainColor","lineColor","opacity","showGroundPlane","startTime","onBeforeRenderObservable","loop","simplex","SimplexNoise","isEntering","noise2D","runRenderLoop","render","onDisposeObservable","CreateScreenshotUsingRenderTarget","onResize","resize","tileIcons","icon","trampolinIcon","bouldersIcon","houseIcon","carousselIcon","sandboxIcon","seasawIcon","swingsIcon","slideIcon","treeIcon","playhutIcon","gymIcon","springsIcon","TileMenu","numberOfSelectedTiles","maximumSelectedTies","setType","shuffledTiles","onClickedHandler","canSelectedNewTile","renderTileLink","closeIcon","emptyIcon","LoadingView","loaded","onStartClicked","hints","grassIcon","fertigIcon","HintView","onClose","startHint","hintIndex","setHintIndex","disabled","previousIcon","length","nextIcon","PlaygroundView","canvasRef","useRef","playground","setPlayground","LOADING","setLoaded","finished","setFinished","showHelp","setShowHelp","setSelectedTile","setNumberOfSelectedTiles","getAvatarImage","current","oncontextmenu","preventDefault","stopPropagation","init","LOADED","addEventListener","removeEventListener","sub","delay","calculateNumberOfSelectedTiles","unsubscribe","STARTED","ref","touch-action","onSelectCapture","count","maximum","selectableTiles","rotateLeft","rotateRight","TileCounter","tileIcon","poolImg","streamImg","WaterbodyView","waterbodies","renderWaterbody","onWaterbodySelect","w","MissingTileView","onSubmit","initial","setText","missingImage","placeholder","onChange","FinishedView","thankyouImg","StartView","onStart","animate","startAnimation","setTimeout","autoPlay","muted","ImpressumView","lighttowerImg","href","API_ADDRESS","SETTINGS","SIZE","App","setStateMachine","currentState","setCurrentState","fetch","method","headers","body","catch","error","then","reset","subscription","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"+aAOKA,EAiBAC,E,sOChBCC,EAAkB,SAASC,EAAuBC,GACtD,IAAMC,EAAU,IAAIC,UAIpB,OAHAH,EAAOI,GAAGH,GAAM,SAACI,GACfH,EAAQI,KAAKD,MAERH,EAAQK,KAAKC,oBAGhBC,EAAY,SAAUC,GAC1B,OAAOA,EAAE,GAAK,EAAEA,EAAEA,GAAQ,EAAE,EAAEA,GAAGA,EAAV,GAOnBC,EAAe,SAASC,EAAcC,EAAWC,GAA4F,IAA7EC,EAA4E,uDAApED,EAAK,GAAIE,EAA2D,uCAC1IC,EAAmBH,EAAKC,EAC9BG,mBAASD,GAAkBV,KAAKY,gBAAM,SAACC,GACrC,OAAOA,EAAM,EAAEL,IACd,GAAIM,qBAAU,SAACX,GAAD,OAAOA,EAAI,MAAIY,UAAU,CACxChB,KAAM,SAACI,GACLM,EAASJ,GAAQC,EAAGD,GAAQH,EAAUC,IAAI,IAE5Ca,SAAU,WACRP,EAASH,GAAI,OAKnB,SAASW,EAAOC,EAAgBC,GAC9B,OAAOC,gBAAMD,GAAe,SAACE,GAC3B,OAAOC,KAAKC,IAAIL,EAAQG,OACpBH,EAGR,SAASM,EAAaN,GACpB,KAAQA,EAAQ,GACdA,GAAmB,EAAVI,KAAKG,GAEhB,KAAOP,EAAkB,EAAVI,KAAKG,IAClBP,GAAmB,EAAVI,KAAKG,GAEhB,OAAOP,E,SAQMQ,E,8EAAf,WAAoCC,GAApC,qBAAAC,EAAA,sDACQC,EAAU,GADlB,cAEiBF,GAFjB,gEAEYN,EAFZ,aAGIQ,EAHJ,SAGuBR,EAHvB,wBAGYS,KAHZ,wLAKSD,GALT,iE,sBDjBA,SAASE,EAAsBC,GAC7B,OAAO,IAAIC,SAAQ,SAACC,GAClBF,EAAKG,UAAY,SAACH,GAAD,OAAUE,EAAQF,Q,SArClC1C,K,cAAAA,E,YAAAA,E,sBAAAA,E,cAAAA,E,kBAAAA,E,cAAAA,E,oBAAAA,E,gBAAAA,E,gBAAAA,E,oBAAAA,E,kBAAAA,E,sBAAAA,E,mBAAAA,M,cAiBAC,K,cAAAA,E,YAAAA,E,cAAAA,E,wBAAAA,E,gBAAAA,E,gBAAAA,E,gBAAAA,E,iBAAAA,M,KAwBL,IE7BK6C,EF6BCC,EAAU,uCAAG,WAAeC,EAAeC,GAA9B,qBAAAX,EAAA,6DACXY,EAAgB,IAAIC,IAAcH,IAC1BI,yBAA0B,EAFvB,SAIGhB,EAAqB,CACvCK,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgBsD,KAAM,iBAAkB,wBAClHb,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgBuD,MAAO,iBAAkB,wBACnHd,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgBwD,UAAW,iBAAkB,4BACvHf,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgByD,OAAQ,iBAAkB,yBACpHhB,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgB0D,MAAO,iBAAkB,wBACnHjB,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgB2D,QAAS,iBAAkB,0BACrHlB,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgB4D,MAAO,iBAAkB,wBACnHnB,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgB6D,SAAU,iBAAkB,2BACtHpB,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgB8D,OAAQ,iBAAkB,yBACpHrB,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgB+D,SAAU,iBAAkB,2BACtHtB,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgBgE,QAAS,iBAAkB,0BACrHvB,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgBiE,UAAW,iBAAkB,4BACvHxB,EAAmCS,EAAcG,iBAAiB,OAAQrD,EAAgBkE,QAAS,iBAAkB,0BAInHzB,EADgB,QAAlBQ,EACqCC,EAAcG,iBAAiB,OAAQpD,EAAWkE,KAAM,6BAA8B,sBACpFjB,EAAcG,iBAAiB,OAAQpD,EAAWmE,MAAO,6BAA8B,yBAG9H3B,EAAmCS,EAAcG,iBAAiB,OAAQpD,EAAWoE,WAAY,uBAAwB,6BACzH5B,EAAmCS,EAAcG,iBAAiB,OAAQpD,EAAWqE,OAAQ,uBAAwB,yBACrH7B,EAAmCS,EAAcG,iBAAiB,OAAQpD,EAAWsE,OAAQ,uBAAwB,yBACrH9B,EAAmCS,EAAcG,iBAAiB,OAAQpD,EAAWuE,OAAQ,uBAAwB,yBACrH/B,EAAmCS,EAAcG,iBAAiB,OAAQpD,EAAWwE,OAAQ,uBAAwB,yBAGrHhC,EAAmCS,EAAcwB,eAAe,mBAAmB,8BAGnF,IAAI/B,SAAQ,SAACC,GACXM,EAAcyB,OACd/B,OAAQgC,QArCK,cAIXC,EAJW,OA0CXC,EAAaD,EAChBE,QAAO,SAACrC,GACP,OAAOA,aAAgBsC,KAAsBtC,EAAKuC,KAAKC,WAAW,WACjEC,KAAI,SAACzC,GAAD,OAAWA,KACjB0C,QAAsB,SAAC7D,EAAKmB,GAE3B,IAAM2C,EAAO3C,EAAK4C,gBAAgBC,0BAAyB,SAACN,GAAD,OAAUA,KAAM,GAAOO,UAAU,GAGtFC,EAAsBC,OAAOC,KAAK1F,GAAY2F,SAASlD,EAAKmD,aAC5DC,EAAapD,EAAKqD,sBAAsBX,QAAwB,SAAC7D,EAAKyE,GAK1E,OAJAA,EAAKC,OACLD,EAAKE,mBAAmBC,SAAQ,SAACC,GAC/B7E,EAAIiB,KAAK,CAAE4D,KAAMA,EAAKC,UAAWC,OAAQF,EAAKE,OAAOrB,KAAMsB,WAAYd,OAElElE,IACP,IAKF,OAFI,OAAJ8D,QAAI,IAAJA,KAAMmB,YAAW,GACjBjF,EAAImB,EAAKmD,aAAe,CAAER,KAAMA,EAAMS,WAAYA,GAC3CvE,IACN,IAGCkF,EAAW5B,EACdE,QAAO,SAACrC,GACP,OAAOA,aAAgBgE,OAExBvB,KAAI,SAACzC,GAAD,OAAWA,KACf0C,QAAqB,SAAC7D,EAAKmB,GAE1B,OADAnB,EAAImB,EAAKuC,MAAQvC,EAAKiE,QACfpF,IACP,IA3Ea,kBA6EVoB,QAAQC,QAAQ,CAAEkC,WAAYA,EAAY2B,SAAUA,KA7E1C,2CAAH,yD,SE7BX3D,O,2BAAAA,I,6BAAAA,I,yBAAAA,I,yCAAAA,I,mCAAAA,I,0BAAAA,M,SAiBC8D,E,kDAQJ,WAAYC,GAA+B,IAAD,8BACxC,gBALMC,YAIkC,IAHlCC,mBAGkC,IAFlCC,eAEkC,EAExC,EAAKA,UAAYH,EAEjB,EAAKE,cAAgB,CACnBE,MAAOC,MAAM,EAAKF,UAAUG,SAAW,EAAKH,UAAUG,UAAUC,KAAK,MAAMjC,KAAK,SAACkC,EAAEC,GACjF,MAAO,CACLC,KAAMvH,EAAgBuD,MACtBiE,SAAkBC,IAAEC,OAAO,CAAC1F,KAAKG,GAAI,EAAGH,KAAKG,GAAK,EAAa,IAAVH,KAAKG,KAC1DwF,MAAOL,MAGXM,eAAgB,OAChBC,QAAS,EAAKb,UAAUa,QACxBC,KAAM9F,KAAK+F,MAAsB,IAAhB/F,KAAKgG,WAExB,EAAKlB,OAAS,EAAKC,cAEnB,EAAKpC,OACL,EAAKlE,KAAK,EAAKwH,OAnByB,E,yCAsB1C,WACEC,KAAKpB,OAASoB,KAAKnB,cACnBmB,KAAKC,OACLD,KAAKzH,KAAKyH,KAAKD,S,kBAGjB,WACE,IACMG,EADUC,OAAOC,aACFC,QAAQ3B,EAAa4B,cAAgB,GAC1D,IACE,IAAMC,EAAOC,KAAKC,MAAMP,GAEpBK,EAAKZ,SAAWK,KAAKpB,OAAOe,UAC9BK,KAAKpB,OAAL,2BAAmBoB,KAAKpB,QAAW2B,IACrC,MAAOG,GACPC,QAAQC,KAAK,uC,kBAIjB,WACkBT,OAAOC,aACfS,QAAQnC,EAAa4B,YAAaE,KAAKM,UAAUd,KAAKpB,W,iBAGhE,WACE,OAAOW,IAAEwB,UAAUf,KAAKpB,U,qBAG1B,SAAQoC,EAAiBC,GACnBD,GAAUpG,EAAQsG,WACpBlB,KAAKpB,OAAOuC,aAAeF,EAAKG,GACvBJ,GAAUpG,EAAQyG,kBAA2C3E,GAA5BsD,KAAKpB,OAAOuC,cACtDnB,KAAKpB,OAAOG,MAAMiB,KAAKpB,OAAOuC,cAAc9B,KAAO4B,EAAK5B,KACxDW,KAAKpB,OAAOG,MAAMiB,KAAKpB,OAAOuC,cAAc7B,SAAWC,IAAEC,OAAO,CAAC,EAAG1F,KAAKG,GAAI,IAAIH,KAAKG,GAAI,EAAEH,KAAKG,MAAQ,GAChG+G,GAAUpG,EAAQ0G,WAAaL,EAAKM,OAC7CvB,KAAKpB,OAAO2C,OAASN,EAAKM,OACjBP,GAAUpG,EAAQ4G,mBAAqBP,EAAK5B,KACrDW,KAAKpB,OAAOc,eAAiBuB,EAAK5B,KACzB2B,GAAUpG,EAAQ6G,gBAAkBR,EAAKS,KAClD1B,KAAKpB,OAAO+C,QAAUV,EAAKS,KAClBV,GAAUpG,EAAQgH,gBACdlF,GAAXuE,EAAKG,IAAmBH,EAAK5B,WAAyB3C,GAAjBuE,EAAK3B,UAC5CU,KAAKpB,OAAOG,MAAMkC,EAAKG,IAAI/B,KAAO4B,EAAK5B,KACvCW,KAAKpB,OAAOG,MAAMkC,EAAKG,IAAI9B,SAAW2B,EAAK3B,UAE3CqB,QAAQC,KAAK,mDAEfZ,KAAKzH,KAAKyH,KAAKD,OACfC,KAAKC,W,GA9EkB7H,KAArBsG,EAEG4B,YAAc,W,WCtCR,MAA0B,qCCA1B,MAA0B,oCCA1B,MAA0B,qCCA1B,2cCAA,+V,0BCeTuB,EAAe,IAAIC,IAEzBD,EAAaE,IAAI,WAAY,CAC3BC,MAAO,oBACPN,KAAM,sFACNO,IAAKC,IAGPL,EAAaE,IAAI,UAAW,CAC1BC,MAAO,iBACPN,KAAM,sEACNO,IAAKE,IAGPN,EAAaE,IAAI,SAAU,CACzBC,MAAO,UACPN,KAAM,kCACNO,IAAKG,IAGP,IAAMC,EAAa,YAA0G,IAAD,MAA9FC,EAA8F,EAA9FA,SAAU1C,EAAoF,EAApFA,KAChC2C,EAAUC,cAD0G,EAG1FC,qBAH0F,mBAGnHC,EAHmH,KAGzGC,EAHyG,KAKpHC,EAAUC,kBAAgB,CAAC,WAAW,SAAS,WAAYjD,GAEzDkD,EAAaC,cAAbD,SAoBR,SAASE,EAAkBzB,GACzB,IAAMU,EAAgB,YAAVV,EAAuBW,EAA0B,WAAVX,EAAsBY,EAAeC,EACxF,OACE,qBAAkBa,UAAU,SAASC,QAAS,kBAlBlD,SAAwB3B,GACtBoB,EAAYpB,GAiB0C4B,CAAe5B,IAAnE,SACE,qBAAK0B,UAAU,OAAf,SACE,qBAAKG,IAAKnB,OAFJV,GAQd,OA9BA8B,qBAAU,WACRlD,OAAOmD,SAAS,EAAG,KAClB,CAACR,IA6BF,sBAAKG,UAAU,cAAf,UACE,wDACA,qBAAKA,UAAU,cAAf,SACIL,EAAQ3F,KAAI,SAAC7C,GAAD,OAAO4I,EAAkB5I,QAEvCsI,GACA,sBAAKO,UAAU,uBAAf,UACE,qBAAKA,UAAU,YACf,sBAAKA,UAAU,SAAf,UACE,uCAAKpB,EAAa0B,IAAIb,UAAtB,aAAK,EAA4BV,QACjC,qBAAKoB,IAAG,UAAEvB,EAAa0B,IAAIb,UAAnB,aAAE,EAA4BT,MACtC,sCAAIJ,EAAa0B,IAAIb,UAArB,aAAI,EAA4BhB,OAChC,sBAAKuB,UAAU,eAAf,UACE,wBAAQA,UAAU,QAAQC,QA7BtC,WACEP,OAAYjG,IA4BF,SAA6C,qBAAK0G,IAAKI,MACvD,wBAAQP,UAAU,QAAQC,QApCtC,WACMR,GACFJ,EAASI,GACXH,EAAQjI,KAAK,eAiCH,SAA8C,qBAAK8I,IAAKK,mB,sKCtEhEC,GAA0B,CAAY,EAAV5J,KAAKG,GAAO,EAAa,EAAVH,KAAKG,GAAO,EAAa,EAAVH,KAAKG,GAAO,EAAa,EAAVH,KAAKG,GAAO,G,IAMrF0J,G,WAmBJ,WAAY7I,EAAc8I,EAA2BC,GAAe,yBAjB5D/I,WAiB2D,OAhB3D8I,YAgB2D,OAd3DE,aAc2D,OAb3DC,WAa2D,OAX3DC,iBAW2D,OAV3DC,eAU2D,OARnEC,YAQmE,OAN3DC,wBAM2D,OAJ3DC,cAAe,EAI4C,KAFnEC,eAAgB,EAGdrE,KAAKlF,MAAQA,EACbkF,KAAK4D,OAASA,EAEd5D,KAAK8D,QAAU,IAAIQ,IAAQ,EAAE,GAC7BtE,KAAK+D,MAAQF,EACb7D,KAAKiE,UAAYnK,KAAKG,GAAK,EAE3B+F,KAAKkE,OAAS,IAAIK,IAAgB,SAAU,IAAIC,IAAQ,EAtC3C,GAsCsD,GAAI1J,GACvEkF,KAAKkE,OAAOO,KAAOC,IAAOC,oBAE1B3E,KAAKgE,YAAchE,KAAKlF,MAAM8J,YAAYC,eAAe7E,KAAKkE,QAE9DlE,KAAK8E,oBACL9E,KAAK+E,uBAEL/E,KAAKmE,mBAAqB,IAAI/L,I,2CAGhC,WACE4H,KAAKmE,mBAAmB5L,S,2BAG1B,WAAwB,IAAD,OAEfyM,EAAK,IAAIC,KAAOjF,KAAK4D,QAG3BoB,EAAGzB,IAAI,SAASxB,IAAI,CAAEmD,QAAQ,EAAMC,UAvDhB,KAwDpB,IAAMC,EAAcpN,EAAgBgN,EAAI,cAClCK,EAAYrN,EAAgBgN,EAAI,YAChCM,EAAatN,EAAgBgN,EAAI,aAGvCA,EAAGzB,IAAI,UAAUxB,IAAI,CAAEmD,QAAQ,IAC/B,IAAMK,EAAevN,EAAgBgN,EAAI,eACnCQ,EAAaxN,EAAgBgN,EAAI,aACjCS,EAAczN,EAAgBgN,EAAI,cAEfI,EAAY5M,KAAKkN,cAAW,kBACnDC,aAAc,CAACL,EAAYM,YAAG,EAAK7B,SAChCvL,KAAKqN,aAAUR,OACjBQ,aAAU7F,KAAKmE,qBAED3L,KAAKqE,cAAO,kBAAM,EAAKwH,kBAAgB9K,WAAU,YAAmB,IAAD,mBAAhBuM,EAAgB,KAAVjC,EAAU,KAClF,EAAKA,KAAOA,EAAOiC,EAAKC,SAGAR,EAAa/M,KAAKkN,cAAW,SAACM,GAAD,OACrDL,aAAc,CAACF,EAAaG,YAAGI,GAAQJ,YAAG,EAAKtG,YAC5C9G,KAAKyN,cAAW,YAAoB,IAAD,mBAAjBH,EAAiB,KAAXE,EAAW,KAClC,OAAOlM,KAAKC,IAAIiM,EAAM1G,SAAWwG,EAAKxG,UA/ErB,KAgFhBuG,aAAUL,OACdK,aAAU7F,KAAKmE,qBAEA3L,KAAKqE,cAAO,kBAAM,EAAKwH,kBAAgB9K,WAAU,YAAyB,IAAD,mBAAtBuM,EAAsB,KAAhBE,EAAgB,KAATE,EAAS,KACnFC,EAAOH,EAAM1G,SAAWwG,EAAKxG,SACnC,EAAKA,SAAW4G,EAAMC,EAAO,IAAMrM,KAAKG,MAI1C,IAAMmM,EAAeC,aAAwBrG,KAAK4D,OAAO,eAAepL,KAAKqE,cAAO,SAACvE,GAAD,OAAOA,EAAEgO,cACvFC,EAAaF,aAAwBrG,KAAK4D,OAAO,aAAapL,KAAKqE,cAAO,SAACvE,GAAD,OAAOA,EAAEgO,cACnFE,EAAeH,aAAwBrG,KAAK4D,OAAO,eAAepL,KAAKqE,cAAO,SAACvE,GAAD,OAAOA,EAAEgO,cACvFG,EAAuBJ,aAAwBrG,KAAK4D,OAAO,eAAepL,KAAKqE,cAAO,SAACvE,GAAD,OAAQA,EAAEgO,cAE9EF,EAAa5N,KAAKkN,cAAW,SAACgB,GAAD,OACnDf,aAAc,CAACa,EAAcZ,YAAGc,GAAOd,YAAG,EAAK9B,QAAQ6C,WACpDnO,KAAKqN,aAAUe,YAAML,EAAWE,QAClCZ,aAAU7F,KAAKmE,qBAEF3L,KAAKqE,cAAO,kBAAM,EAAKwH,kBAAgB9K,WAAW,YAA2B,IA9FjEsN,EAA2CC,EA8FqB,mBAAxBhB,EAAwB,KAAlBY,EAAkB,KAAZK,EAAY,KACpFC,EAAKN,EAAKO,QAAUnB,EAAKmB,QACzBC,EAAKR,EAAKS,QAAUrB,EAAKqB,QAEzBC,EAAM,EAAKC,oBACXC,EAlGH,EADkER,EAmG5B,CAACI,EAAIF,IAlGnC,IADeH,EAmGUO,GAlGb,GAAKN,EAAM,GAAKD,EAAO,GAAIC,EAAM,GAAKD,EAAO,GAAKC,EAAM,GAAKD,EAAO,IAmGrFU,EAAc,IAAO,EAAK1D,KAEhC,EAAK2D,gBAAgBT,EAAOU,EAAIH,EAAK,GAAGC,EAAaR,EAAOW,EAAIJ,EAAK,GAAGC,MAIvDlB,aAAsBlG,OAAO,SACrC3H,KAAKqE,cAAO,kBAAM,EAAKwH,kBAAgB9K,WAAW,SAACjB,GAC5D,EAAKuL,MAA8B,GAAtB/J,KAAK6N,KAAKrP,EAAEsP,a,sBAK7B,WACE5H,KAAKgE,YAAchE,KAAKlF,MAAM8J,YAAYC,eAAe7E,KAAKkE,QAC9DlE,KAAK8E,sB,+BAGP,WACE9E,KAAKkE,OAAO2D,SAAW7H,KAAK+D,MAC5B/D,KAAKkE,OAAO4D,aAAe9H,KAAK+D,MAChC/D,KAAKkE,OAAO6D,WAAa/H,KAAK+D,MAAQ/D,KAAKgE,YAC3ChE,KAAKkE,OAAO8D,WAAahI,KAAK+D,MAAQ/D,KAAKgE,c,kCAG7C,WACEhE,KAAKkE,OAAO+D,SAASR,EAAIzH,KAAK8D,QAAQ2D,EArIzB,GAqI6B3N,KAAKoO,IAAIlI,KAAKiE,WACxDjE,KAAKkE,OAAO+D,SAASE,EAAInI,KAAK8D,QAAQ4D,EAtIzB,GAsI6B5N,KAAKsO,IAAIpI,KAAKiE,WACxDjE,KAAKkE,OAAOmE,UAAU,IAAI7D,IAAQxE,KAAK8D,QAAQ2D,EAAE,EAAEzH,KAAK8D,QAAQ4D,M,6BAGlE,SAAgBD,EAAWC,GACzBD,EAAI3N,KAAKwO,KA9IC,EA8IWxO,KAAKyO,IA9IhB,EA8I2Bd,IACrCC,EAAI5N,KAAKwO,KA9IC,EA8IWxO,KAAKyO,IA9IhB,EA8I2Bb,IAErC1H,KAAK8D,QAAQ2D,EAAIA,EACjBzH,KAAK8D,QAAQ4D,EAAIA,EAEjB1H,KAAK+E,yB,+BAGP,WACE,MAAO,CACLjL,KAAKoO,IAAIlI,KAAKiE,YAAanK,KAAKsO,IAAIpI,KAAKiE,WACzCnK,KAAKsO,IAAIpI,KAAKiE,WAAYnK,KAAKoO,IAAIlI,KAAKiE,c,oBAS5C,WACE,OAAOjE,KAAKiE,W,IANd,SAAauE,GACXxI,KAAKiE,UAAYjK,EAAawO,GAC9BxI,KAAK+E,yB,wBAOP,WAAqB,IAAD,OAClB,IAAI/E,KAAKoE,aAAT,CACA,IAAIoE,EAAQ/O,EAAOO,EAAagG,KAAKiE,UAAYnK,KAAKG,GAAG,GAAIyJ,IAC7D8E,EAAQxI,KAAKiE,UAAYnK,KAAKG,GAAG,EAAI,EAAIuO,EAAkB,EAAV1O,KAAKG,GAASuO,EAC/D5P,EAAaoH,KAAKiE,UAAWuE,EAAO,SAAK9L,GAAW,SAACyC,EAAGsJ,GACtD,EAAKnJ,SAAWH,EAChB,EAAKiF,cAAgBqE,Q,yBAIzB,WAAsB,IAAD,OACnB,IAAIzI,KAAKoE,aAAT,CACA,IAAIoE,EAAQ/O,EAAOO,EAAagG,KAAKiE,UAAYnK,KAAKG,GAAG,GAAIyJ,IAC7D8E,EAAQxI,KAAKiE,UAAYnK,KAAKG,GAAG,EAAc,EAAVH,KAAKG,GAAmB,EAAVH,KAAKG,GAASuO,EAAQA,EACzE5P,EAAaoH,KAAKiE,UAAWuE,EAAO,SAAK9L,GAAW,SAACyC,EAAGsJ,GACtD,EAAKnJ,SAAWH,EAChB,EAAKiF,cAAgBqE,Q,gBASzB,WACE,OAAOzI,KAAK+D,O,IANd,SAASF,GACP7D,KAAK+D,MAAOjK,KAAKwO,IA9LJ,EA8LmBxO,KAAKyO,IA/LxB,GA+LsC1E,IACnD7D,KAAK8E,wB,KCxLT,SAAS4D,GAAWjJ,EAAgBkJ,GAClCA,EAAMlJ,GAAN,2BAAoBkJ,EAAMlJ,IAA1B,IACEmJ,UAAY9O,KAAKgG,SAAW,GAAM/H,EAAWuE,OAASvE,EAAWwE,OACjE+C,SAAWC,IAAEC,OAAO,CAAC,EAAG1F,KAAKG,GAAK,EAAGH,KAAKG,GAAe,EAAVH,KAAKG,GAAO,MAI/D,SAAS4O,GAAiBpJ,EAAgBkJ,GACxCA,EAAMlJ,GAAN,2BAAmBkJ,EAAMlJ,IAAzB,IACEmJ,UAAY7Q,EAAWoE,WACvBmD,SAAWxF,KAAKG,KAIpB,SAAS6O,GAAYrJ,EAAekJ,GAClCA,EAAMlJ,GAAN,2BAAmBkJ,EAAMlJ,IAAzB,IACEmJ,UAAWrJ,IAAEC,OAAO,CAACzH,EAAWqE,OAAQrE,EAAWsE,UAAY,KAC/DiD,SAAUxF,KAAKgG,SAAW,GAAM,EAAIhG,KAAKG,KAI7C,ICbK8O,GDaCC,GAAa,SAASC,GAAkC,IAAnBC,EAAkB,uDAAV,EACjDA,EAAiB,GAATA,EAAaD,EAAQC,EAC7B,IAF2D,EAErDP,EAAqB,GAFgC,cAG3CpJ,IAAE4J,MAAMF,IAHmC,IAG3D,2BAAgC,CAAC,IAAD,EAArB7J,EAAqB,sBACdG,IAAE4J,MAAMD,IADM,IAC9B,2BAAgC,CAAC,IAAtBE,EAAqB,QAC9BT,EAAMrO,KAAK,CAAE2N,SAAU,CAAC7I,GAAK6J,EAAM,GAAGG,GAAKF,EAAM,IAAKN,UAAY,QAFtC,gCAH2B,8BAU3DF,GAAW,EAAE,EAAEQ,EAAOP,GACtBD,GAAW,EAAE,EAAEQ,EAAOP,GACtBD,GAAW,EAAE,EAAEQ,EAAOP,GACtBD,GAAW,EAAE,EAAEQ,EAAOP,GACtBD,GAAW,EAAE,EAAEQ,EAAOP,GACtBD,GAAW,EAAE,EAAEQ,EAAOP,GAGtBE,GAAiB,EAAI,EAAEI,EAAON,GAC9BE,GAAiB,EAAI,EAAEI,EAAON,GAnB6B,oBAsB3CpJ,IAAE4J,MAAMF,IAtBmC,IAsB3D,2BAAgC,CAAC,IAAtB7J,EAAqB,QAC9B0J,GAAY,EAAE1J,EAAE6J,EAAON,IAvBkC,8BA0B3D,MAAO,CACLA,MAAOA,EACPU,KAAM,CAACJ,EAAOC,K,0IEHZI,G,WAKJ,WAAYrB,EAAmBxJ,EAAkB3D,GAAe,yBAFhEyO,oBAE+D,EAE7D,IAAMC,EAAcC,IAAkBC,YAEtC,GAAIF,EAAa,CACf,IAAMG,EAAY,IAAIF,IAAkB,YAAa,CAAEG,SAAU,KAAO9O,GACxE6O,EAAUE,oBAAsB,IAChCF,EAAU3D,QACVhG,KAAKuJ,eAAiBI,MACjB,CACL,IAAMG,EAAY,IAAIC,KAAe,WAAY,IAAKjP,GACtDgP,EAAU9D,QACVhG,KAAKuJ,eAAiBO,EAGxB9J,KAAKuJ,eAAeS,gBAAkBvL,EAEtCuB,KAAKuJ,eAAeU,QAAUhC,EAC9BjI,KAAKuJ,eAAeW,mBAAmB,IAAI1F,KAAS,EAAG,IAAK,GAAI,IAAIA,IAAQ,EAAG,GAAI,IAEnFxE,KAAKuJ,eAAeY,OAAS,IAAIC,IAAO,GAAK,GAAK,EAAK,GACvDpK,KAAKuJ,eAAec,OAAS,IAAID,IAAO,GAAK,GAAK,EAAK,GACvDpK,KAAKuJ,eAAee,UAAY,IAAIF,IAAO,EAAG,EAAG,EAAG,GAEpDpK,KAAKuJ,eAAegB,QAAU,IAC9BvK,KAAKuJ,eAAeiB,QAAUhB,EAAc,GAAM,GAGlDxJ,KAAKuJ,eAAekB,YAAc,GAClCzK,KAAKuJ,eAAemB,YAAc,GAGlC1K,KAAKuJ,eAAeoB,SAAWnB,EAAc,IAAM,IACnDxJ,KAAKuJ,eAAeqB,QAAU,IAAIpG,IAAQ,GAAI,KAAM,GAEpDxE,KAAKuJ,eAAesB,gBAAkB,EACtC7K,KAAKuJ,eAAeuB,gBAA4B,GAAVhR,KAAKG,GAG3C+F,KAAKuJ,eAAewB,aAAe,GACnC/K,KAAKuJ,eAAeyB,aAAe,GACnChL,KAAKuJ,eAAe0B,YAAc,K,2CAMpC,YACMjL,KAAKuJ,0BAA0BQ,MAAkB/J,KAAKuJ,0BAA0BE,MAClFzJ,KAAKuJ,eAAe2B,c,KAIpBC,G,WAIJ,WAAYlD,EAAmBnN,GAAe,yBAF9CsQ,WAE6C,EAC3CpL,KAAKoL,MAAQ,IAAIC,IAAW,aAAcpD,EAAUnN,GACpDkF,KAAKoL,MAAME,UAAY,EACvBtL,KAAKoL,MAAMjC,MAAQ,GACnBnJ,KAAKoL,MAAMG,QAAU,IAAIC,IAAO,EAAE,EAAI,G,2CAGxC,WACExL,KAAKoL,MAAMF,c,KCpHTO,G,WAmBJ,WAAY1O,EAAc2O,EAAuBnN,EAAwBzD,EAAc6Q,GAA6B,yBAlBpHC,UAkBmH,OAjBnH7O,UAiBmH,OAf3G8O,eAe2G,OAb3GC,WAa2G,OAX3GC,aAW2G,OAV3GC,eAU2G,OAR3GC,YAQ2G,OAN3GC,SAAgC,GAM2E,KAJ3GC,gBAI2G,OAH3GC,qBAG2G,OAF3GC,aAAc,EAGpBrM,KAAKjD,KAAOA,EACZiD,KAAK+L,QAAUL,EACf1L,KAAKgM,UAAYzN,EACjByB,KAAKiM,OAASnR,EAEdkF,KAAKoM,gBAAkBT,EAEvB3L,KAAK6L,UAAY,IAAIrH,KAAQ,EAAE,EAAE,GAEjCxE,KAAK4L,KAAO,IAAIU,KAAcvP,EAAMjC,GAAO,G,2CAG7C,WAAkB,IAAD,IACf,UAAAkF,KAAK4L,YAAL,SAAWV,UACXlL,KAAKkM,SAASjO,SAAQ,SAAC3F,GAAD,OAAOA,EAAE4S,aAC/BlL,KAAKkM,SAAW,GAChB,UAAAlM,KAAKmM,kBAAL,SAAiBjB,Y,gBAGnB,WACE,OAAOlL,KAAK8L,OAAS/T,EAAWwU,O,IAGlC,SAASlN,GAAkB,IAAD,eACxB,GAAIW,KAAK8L,OAASzM,EAAlB,CAEAW,KAAK8L,MAAQzM,EAGbW,KAAKkL,UAGD7L,GAAQtH,EAAWkE,MACrB+D,KAAKkM,SAAS5R,KAAK,IAAIgP,GAAStJ,KAAK4L,KAAKY,sBAAsBC,IAAI,IAAIjI,KAAQ,IAAM,IAAK,MAAQxE,KAAKgM,UAAU,oBAAqBhM,KAAKiM,SAC5IjM,KAAKkM,SAAS5R,KAAK,IAAI6Q,GAAWnL,KAAK4L,KAAKY,sBAAsBC,IAAI,IAAIjI,KAAQ,EAAG,EAAG,IAAKxE,KAAKiM,UACxF5M,GAAQtH,EAAWmE,QAC7B8D,KAAKkM,SAAS5R,KAAK,IAAI6Q,GAAWnL,KAAK4L,KAAKY,sBAAsBC,IAAI,IAAIjI,MAAS,EAAG,KAAM,KAAOxE,KAAKiM,SACxGjM,KAAKkM,SAAS5R,KAAK,IAAI6Q,GAAWnL,KAAK4L,KAAKY,sBAAsBC,IAAI,IAAIjI,KAAQ,EAAG,GAAM,IAAKxE,KAAKiM,SACrGjM,KAAKkM,SAAS5R,KAAK,IAAI6Q,GAAWnL,KAAK4L,KAAKY,sBAAsBC,IAAI,IAAIjI,MAAS,EAAG,KAAM,IAAKxE,KAAKiM,UAIxG,IAAM9O,EAAI,UAAS6C,KAAK+L,QAAQ1M,UAAtB,iBAAS,EAAoBlC,YAA7B,aAAS,EAA0BuP,0BAAqBhQ,OAAWA,GAAW,SAAC0G,EAAKuD,GAC5FA,EAAM5J,KAAOqG,EAAIrG,QAInB,UAAAiD,KAAK+L,QAAQ1M,UAAb,mBAAoBzB,kBAApB,SAAgCK,SAAQ,YAAiC,IAA/BC,EAA8B,EAA9BA,KAAME,EAAwB,EAAxBA,OAAQC,EAAgB,EAAhBA,WACtD,EAAK8N,WAAa,IAAIQ,KAAe,EAAK5P,KAAM,EAAKkP,QACrD,IAAMW,EAAazP,EAAK0P,iBAAYnQ,GAAW,GAAOoQ,MAAK,SAAClB,GAC1D,OAAOA,EAAK7O,MAAQqB,KAEtB,GAAIwO,EAAY,CACd,EAAKT,WAAWY,qBAAqB7O,EAAM0O,GAC3C,IAAMI,EAAQ3O,OAAa3B,EAA4B,GAAhB5C,KAAKgG,SAAiB,GAC7D,EAAKqM,WAAWnG,OAAM,EAAMgH,OAI5B7P,IAAMA,EAAK8P,uBAAwB,GAGnC9P,GAAQ6C,KAAKoM,kBACfpM,KAAKqM,aAAa,EAClBrM,KAAKiM,OAAOiB,qBAAqBlN,KAAK4L,KAAM,CAAC5L,KAAKoM,iBAAkB,EAAG,GAAG,EAAO,GAAG,WAClF,EAAKC,aAAc,MAIvBrM,KAAK4L,KAAOzO,GAAQ,IAAImP,KAActM,KAAKjD,KAAMiD,KAAKiM,QAEtDjM,KAAK4L,KAAK3D,SAAWjI,KAAK6L,UAC1B7L,KAAK4L,KAAKtN,YAAW,M,sBAGvB,WACE,OAAO0B,KAAKqM,c,oBAGd,WACE,OAAOrM,KAAK4L,KAAKtM,SAASoI,G,IAG5B,SAAapI,GACXU,KAAK4L,KAAKuB,OAAO,IAAI3I,KAAQ,EAAE,EAAE,GAAIlF,K,oBASvC,WACE,OAAOU,KAAK6L,W,IAPd,SAAa5D,GACXjI,KAAK6L,UAAY5D,EACbjI,KAAK4L,OACP5L,KAAK4L,KAAK3D,SAAWjI,KAAK6L,a,sBAO9B,WACE,OAAOrO,OAAOC,KAAK3F,GAAiB4F,SAASsC,KAAK8L,S,kBAGpD,WACE9L,KAAK4L,KAAKtN,YAAW,K,kBAGvB,WACE0B,KAAK4L,KAAKtN,YAAW,O,KCjInB8O,G,WAKJ,WAAYC,GAAkC,yBAHtCC,kBAGqC,OAFrCC,mBAEqC,EAC3CvN,KAAKsN,aAAeD,EACpBrN,KAAKuN,cAAgBC,IAAYC,UAAU,cAAe,CAAEC,MAAO,IAAKC,OAAQ,IAAMC,MAAO,KAAO5N,KAAKsN,aAAaO,mBAEtH,IAAMC,EAAW,IAAIC,IAAiB,eAAgB/N,KAAKsN,aAAaO,mBACxEC,EAASE,aAAe,IAAIxC,IAAO,GAAK,GAAK,IAC7CsC,EAASG,cAAgB,IAAIzC,IAAO,GAAK,GAAK,IAC9CsC,EAASI,MAAQ,IACjBJ,EAASK,UAAYC,KAAOC,gBAC5BrO,KAAKuN,cAAcO,SAAWA,EAC9B9N,KAAKsN,aAAagB,cAAe,EAEjCtO,KAAKuN,cAAcjP,YAAW,GAC9B0B,KAAKuN,cAAcgB,YAAa,EAChCvO,KAAKuN,cAAciB,UAAU,IAAIhK,IAAQ,EAAE,EAAE,GAAI,KACjDxE,KAAKuN,cAAckB,mC,wCAIrB,SAAWvJ,GACTlF,KAAKuN,cAAcjP,WAAW4G,K,oBAGhC,SAAawJ,GACX1O,KAAKuN,cAActF,SAAWyG,M,KAI5BC,G,kDAgBJ,WAAY7T,EAAc8T,GAAa,IAAD,8BACpC,gBAfF7P,WAcsC,IAbtCjE,WAasC,IAZtC8T,UAYsC,IAV9BtB,kBAU8B,IAT9BxJ,aAS8B,IAP9B+K,aAO8B,IAJtCC,4BAIsC,IAHtCC,0BAGsC,IAFtC5K,wBAEsC,EAEpC,EAAKyK,KAAOA,EACZ,EAAK9T,MAAQA,EACb,EAAKiE,MAAQ,GAEb,EAAK8P,QAAU,CAAEnD,OAAQ,GAAInN,SAAU,IAEvC,EAAKuQ,uBAAyB,IAAI1W,IAClC,EAAK2W,qBAAuB,IAAI3W,IAChC,EAAK+L,mBAAqB,IAAI/L,IAE9B,EAAKkV,aAAe,IAAI0B,IAAqBlU,GAAO,GACpD,IAAImU,IAAiB,SAAU,IAAIzK,IAAQ,EAAG,EAAG,GAAI,EAAK8I,aAAaO,mBACvE,EAAK/J,QAAU,IAAIsJ,GAAW,EAAKE,cAEnC,EAAK4B,0BAhB+B,E,2CAoBtC,WACElP,KAAKmE,mBAAmB5L,S,kBAG1B,SAAWmT,GACT1L,KAAK6O,QAAQnD,OAASA,I,oBAGxB,SAAanN,GACXyB,KAAK6O,QAAQtQ,SAAWA,I,qCAG1B,WAAkC,IAAD,OAG/ByB,KAAKlF,MAAMqU,oBAAoB1C,KAAK,SAAC2C,GAC/BA,EAAM/P,MAAQgQ,IAAkBC,YAClC,EAAKR,uBAAuBvW,KAAK6W,GAC1BA,EAAM/P,MAAQgQ,IAAkBE,WACvC,EAAKR,qBAAqBxW,KAAK6W,MAGnC,IAAMI,EAAgBxP,KAAK8O,uBAAuBtW,KAAKyE,cAAI,SAACmS,GAE1D,MAAQ,CAAEK,KADG,EAAKnC,aAAaO,kBAAkB4B,KAAKL,EAAMlX,MAAMwX,QAASN,EAAMlX,MAAMyX,SACjEzX,MAAOkX,EAAMlX,MAAOa,KAAM6W,KAAKC,WAGnC7P,KAAK+O,qBAAqBvW,KAAKyE,cAAI,SAACmS,GAEtD,MAAQ,CAAEK,KADG,EAAKnC,aAAaO,kBAAkB4B,KAAKL,EAAMlX,MAAMwX,QAASN,EAAMlX,MAAMyX,SACjEzX,MAAOkX,EAAMlX,MAAOa,KAAM6W,KAAKC,WAI3CrX,KAAKsX,aAAeN,GAAgB3J,aAAU7F,KAAKmE,qBAAqB5K,WAAW,YAAiB,IAAD,UAElB,IAFkB,mBAAdwW,EAAc,KAAVrJ,EAAU,KACvGsJ,EAAOlW,KAAKC,IAAIgW,EAAG7X,MAAM+O,QAAUP,EAAKxO,MAAM+O,SAAWnN,KAAKC,IAAIgW,EAAG7X,MAAMiP,QAAUT,EAAKxO,MAAMiP,UAClG,UAAA4I,EAAGN,YAAH,eAASQ,OAAO,UAAAF,EAAGN,YAAH,mBAASS,kBAAT,eAAqBnT,QAArB,UAA6B2J,EAAK+I,YAAlC,iBAA6B,EAAWS,kBAAxC,aAA6B,EAAuBnT,OAAQiT,EAAO,IACrF,EAAKG,KAAK,gBAAV,UAA2BJ,EAAGN,KAAKS,kBAAnC,iBAA2B,EAAoBE,gBAA/C,aAA2B,EAA8BC,gB,mBAK/D,SAAM3C,EAAeC,GAAwB,IAAD,OAEpC2C,EAA8B,IAAIC,IAAU,kBAAmB,aAAa,GAAIA,IAAUC,oBAAqBD,IAAUE,4BAC/HH,EAAgBI,QAAQnR,IAAE4J,MAAM,GAAGlM,KAAoB,SAACmC,GACtD,MAAO,CAAEuR,MAAOvR,EAAG1F,MAAQhB,EAAU0G,EAAE,GAAK,OAI9CY,KAAKjB,MAAQiB,KAAK4O,KAAKjG,MAAM1L,KAAI,WAAkCmC,GAAO,IAAvC6I,EAAsC,EAAtCA,SAAUW,EAA4B,EAA5BA,UAAWtJ,EAAiB,EAAjBA,SAChDsR,EAAO,IAAInF,GAAJ,cAAgBrM,GAAK,EAAKyP,QAAQnD,OAAQ,EAAKmD,QAAQtQ,SAAU,EAAKzD,MAAOwV,GAO1F,OALAM,EAAK3I,SAAW,IAAIzD,IAAQyD,EAAS,GAAKyF,EAAQA,EAAM,EAAI,EAAGzF,EAAS,GAAK0F,EAASA,EAAO,GAC7FiD,EAAKvR,KAAOuJ,GAAa9Q,EAAgBuD,MACzCuV,EAAKtR,SAAWA,GAAY,EAC5BsR,EAAKC,OACL,EAAKV,KAAK,aAAc,CAAE/O,GAAIhC,EAAGC,KAAMuR,EAAKvR,KAAMC,SAAUsR,EAAKtR,WAC1DsR,KAIT5Q,KAAK4O,KAAKjG,MAAM1K,SAAQ,WAAwBmB,GAAO,IAA7B6I,EAA4B,EAA5BA,SAAUW,EAAkB,EAAlBA,UAClC,IAAIA,EAAJ,CAGA,IAAMkI,EAAMtD,IAAYC,UAAZ,sBAAqCrO,GAAK,CAAEsO,MAAO,EAAGC,OAAO,IAAMC,MAAM,GAAK,EAAKN,aAAaO,mBAC5GiD,EAAIV,SAAW,CAAEC,UAAYjR,EAAG2R,WAAyB,MAAbnI,GAC5CkI,EAAI7I,SAAW,IAAIzD,IACjByD,EAAS,GAAKyF,EAAQA,EAAM,EAC5B,GACAzF,EAAS,GAAK0F,EAASA,EAAO,GAEhCmD,EAAIE,WAAa,EACjBF,EAAIvC,YAAa,Q,8BAIrB,SAAiB0C,EAAwBC,GAAkC,IAAD,QACnDA,EAAY3R,IAAE4R,eAAeD,EAAWD,EAAW1R,IAAE6R,SAAWH,GACxEhT,SAAQ,SAACoT,GACpB,IAAMT,EAAO,EAAK7R,MAAMsS,EAAU5R,OAC9BmR,GAAQA,EAAKG,aACfH,EAAKvR,KAAOgS,EAAUhS,KACtBuR,EAAKtR,SAAW+R,EAAU/R,e,6BAKhC,SAAgB+Q,QACG3T,GAAb2T,QAAmD3T,GAAzBsD,KAAKjB,MAAMsR,IACvCrQ,KAAK8D,QAAQmE,SAAWjI,KAAKjB,MAAMsR,GAAWpI,SAC9CjI,KAAK8D,QAAQoB,QAAS,GAEtBlF,KAAK8D,QAAQoB,QAAS,M,GAjIFoM,MChBpBC,G,WAiBJ,cAA4I,IAAD,OAA7H3N,EAA6H,EAA7HA,OAAQjF,EAAqH,EAArHA,SAAU6S,EAA2G,EAA3GA,aAA2G,yBAf3I5N,YAe2I,OAd3I6N,YAc2I,OAb3I3W,WAa2I,OAZ3I6D,cAY2I,OAX3IuF,YAW2I,OAT3I3F,cAS2I,OAP3IiT,kBAO2I,OAL3IE,yBAK2I,OAJ3IxM,YAI2I,OAF3If,wBAE2I,EACzInE,KAAK4D,OAASA,EACd5D,KAAKyR,OAAS,IAAIE,IAAe/N,GAAQ,EAAM,CAAEgO,uBAAuB,EAAMC,SAAS,IACvF7R,KAAKlF,MAAQ,IAAI6W,IAAc3R,KAAKyR,OAAO,IAC3CzR,KAAKwR,aAAeA,EACpBxR,KAAKrB,SAAWA,EAChBqB,KAAK0R,qBAAsB,EAG3B1R,KAAKkF,QAAS,EAEdlF,KAAKmE,mBAAqB,IAAI/L,IAE9B4H,KAAKzB,SAAW,GAEhByB,KAAKkE,OAAS,IAAIP,GAAmB3D,KAAKlF,MAAOkF,KAAK4D,OAAQ5D,KAAKrB,SAASuF,OAAOL,MAGnF7D,KAAKlF,MAAMgX,uBAAuBrF,KAAI,SAACsF,GACrCA,EAAYC,yBAA2B,EAAKN,uB,2CAKhD,WACE1R,KAAKmE,mBAAmB5L,OACxByH,KAAKyR,OAAOQ,iBACZjS,KAAKyR,OAAOvG,Y,kBAId,SAAKnQ,EAAgCmX,GAA8B,IAAD,OAE1DtD,EAA0B,QAAlB7T,ELOS,SAASkO,GAAkC,IAAnBC,EAAkB,uDAAV,EACnD0F,EAAO5F,GAAWC,EAAOC,GACzBiJ,EAAKrY,KAAK+F,MAAMoJ,EAAM,GAAK,EAC3BmJ,EAAKtY,KAAK+F,MAAMqJ,GAASD,EAAO,GAAK,EAU3C,OATA2F,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWkE,KAC7D2S,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MACtDqC,EKpBqCyD,CAAmBrS,KAAKrB,SAASM,ULXvD,SAASgK,GAAkC,IAAnBC,EAAkB,uDAAV,EAChD0F,EAAO5F,GAAWC,EAAOC,GACzBiJ,EAAKrY,KAAK+F,MAAMoJ,EAAM,GAAK,EAC3BmJ,EAAKtY,KAAK+F,MAAMqJ,GAASD,EAAO,GAAK,EAY3C,OAXA2F,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWmE,MAC7D0S,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAG9S,SAAW,EACjDsP,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MAC7DqC,EAAKjG,OAAOwJ,EAAK,GAAKlJ,EAAQmJ,EAAK,GAAGxJ,UAAY7Q,EAAWwU,MACtDqC,EKJkF0D,CAAgBtS,KAAKrB,SAASM,UAG/GsT,EAAc,IAAI5D,GAAY3O,KAAKlF,MAAO8T,GAGhD2D,EAAYla,GAAG,iBAAiB,SAAC+I,GAAD,OAAQ,EAAKoQ,aAAagB,QAAQ5X,EAAQsG,WAAY,CAAEE,GAAIA,OAG5FmR,EAAYla,GAAG,cAAc,SAAC4I,GAAW,EAAKuQ,aAAagB,QAAQ5X,EAAQgH,UAAWX,MAGtFjB,KAAKwR,aACFhZ,KAAKia,eAAY5M,aAAU7F,KAAKmE,qBAChC5K,WAAU,YAAmB,IAAD,mBAAhBuE,EAAgB,KAAV4U,EAAU,KAC3BH,EAAYI,iBAAiB7U,EAAKiB,MAAO2T,EAAK3T,UAIlDiB,KAAKwR,aACFhZ,KAAKyE,cAAI,SAAC8C,GAAD,OAAWA,EAAMoB,gBAAeyR,eAAwB/M,aAAU7F,KAAKmE,qBAChF5K,WAAU,SAAC4H,GACV,EAAK+C,OAAOG,mBAAgC3H,GAAhByE,EAC5BoR,EAAYM,gBAAgB1R,MAIhC2R,aAAYjY,EAAWmF,KAAKlF,MAAOC,IAChCvC,KAAKqN,aAAU7F,KAAKmE,qBACpB5K,WAAU,YAA6B,IC8CTuB,ED9ClB8B,EAA0B,EAA1BA,WAAY2B,EAAc,EAAdA,SACvBgU,EAAY7G,OAAS9O,EACrB2V,EAAYhU,SAAWA,EAGvBgU,EAAYQ,MAAM,EAAKpU,SAAS+O,MAAO,EAAK/O,SAASgP,QAGrD4E,EAAYI,iBAAiB,EAAKnB,aAAazR,MAAMhB,QCsCxBjE,EDpCT,EAAKA,OCqCzBkY,WAAY,EAClBlY,EAAMmY,0BAA2B,EACjCnY,EAAMoY,mBACNpY,EAAMqY,6BAA8B,EDvC9B,EAAKjP,OAAOkP,gBACZlB,OEtHY,SAASpX,GAC3B,IAAMsQ,EAAQ,IAAI6D,IAAiB,QAAS,IAAIzK,IAAQ,GAAI,EAAG,GAAG1J,GAClEsQ,EAAME,UAAY,EAClBF,EAAMiI,YAAc,IAAI7H,IAAO,IAAI,IAAK,GAAG,IAAK,GAAG,KAGnD,IAAM8H,EAAW,IAAIC,IAAiB,MAAO,IAAI/O,IAAQ,GAAI,EAAG,GAAI1J,GACpEwY,EAASrL,SAAW,IAAIzD,IAAQ,EAAE,EAAE,GACpC8O,EAASE,qBAAqB,IAAIhP,IAAQ,EAAE,EAAE,IAC9C8O,EAAShI,UAAY,EACrBgI,EAAS/H,QAAU,IAAIC,IAAO,EAAS,EAAS,IFmH9CiI,CAAYzT,KAAKlF,OC3EG,SAASuO,EAAcvO,GAAoC,IAArB4Y,EAAoB,uDAAV,EAGhEC,EAASnG,IAAYoG,aAAa,SAAU,CAAClG,MAAMrE,EAAMsE,OAAOtE,IAChEwK,EAAiB,IAAI9F,IAAiB,SAASjT,GAC/C2D,EAAU,IAAIqV,KAAQ,6BAA8BhZ,GAC1D2D,EAAQsV,OAAStV,EAAQuV,OAAS,GAClCH,EAAeI,eAAiBxV,EAChCoV,EAAe5F,cAAgB,IAAIzC,IAAO,EAAG,EAAG,GAChDmI,EAAO7F,SAAW+F,EAClBF,EAAO1L,SAASP,EAAIgM,EACpB5Y,EAAMoZ,QAAQP,GAGd,IAAM/E,EAAOpB,IAAYoG,aAAa,SAAU,CAAClG,MAAMrE,EAAMsE,OAAOtE,IAC9D8K,EAAe,IAAIC,KAAa,UAAWtZ,GACjDqZ,EAAaE,mBAAqB,EAClCF,EAAaG,oBAAsB,EACnCH,EAAaI,UAAY,KACzBJ,EAAaK,iBAAkB,EAC/BL,EAAaM,UAAY,IAAIjJ,IAAO,EAAG,EAAG,GAC1C2I,EAAaO,UAAY,IAAIlJ,IAAO,EAAK,EAAK,GAC9C2I,EAAaQ,QAAU,GACvB/F,EAAKd,SAAWqG,EAChBvF,EAAK3G,SAASP,EAAIgM,EAClB5Y,EAAMoZ,QAAQtF,GDsDZgG,CAAgB,GAAI5U,KAAKlF,OAQzB,IAAM+Z,EAAYjF,KAAKC,MACvB7P,KAAKlF,MAAMga,yBAAyBrI,KAAI,WAAQsI,EAAKnF,KAAKC,MAAQgF,MAElE,IAAMG,EAAU,IAAIC,IAEdF,EAAO,SAAChc,GASZwZ,EAAYxT,MAAMd,SAAQ,SAAC2S,EAAKxR,GACzBwR,EAAKsE,aACRtE,EAAK3I,SAASP,EAAuC,IAAnCsN,EAAQG,QAAQ/V,EAAS,KAAPrG,QAK1CiH,KAAKyR,OAAO2D,eAAc,WACpB,EAAKlQ,QACP,EAAKpK,MAAMua,YAIfrV,KAAKlF,MAAMwa,oBAAoB7I,KAAI,WACjC8F,EAAYrH,e,4BAGhB,WACE,GAAIlL,KAAKkE,OAAQ,CACflE,KAAKlF,MAAMua,SACX,IAAMhM,EAAO,CAAEsE,OAA2B,EAAnB3N,KAAK4D,OAAO+J,OAAUD,MAAyB,EAAlB1N,KAAK4D,OAAO8J,OAChEiE,IAAc4D,kCAAkCvV,KAAKyR,OAAQzR,KAAKkE,OAAOA,OAAQmF,M,oBAIrF,WACErJ,KAAKkE,OAAOsR,WACZxV,KAAKyR,OAAOgE,W,yBAGd,SAAYvQ,GACVlF,KAAK0R,oBAAsBxM,EAC3BlF,KAAKkE,OAAOG,cAAgBa,M,KGzLjB,I,OAAA,kdCAA,OAA0B,gDCA1B,OAA0B,+CCA1B,OAA0B,4CCA1B,OAA0B,gDCA1B,OAA0B,8CCA1B,OAA0B,6CCA1B,OAA0B,6CCA1B,OAA0B,4CCA1B,OAA0B,2CCA1B,OAA0B,8CCA1B,OAA0B,4CCA1B,OAA0B,gDCA1B,OAA0B,8CCuBnCwQ,GAAmE,CACvE,CAAErW,KAAMvH,EAAgBwD,UAAWqa,KAAMC,GAAe7Y,KAAM,aAC9D,CAAEsC,KAAMvH,EAAgB6D,SAAUga,KAAME,GAAc9Y,KAAM,UAC5D,CAAEsC,KAAMvH,EAAgB4D,MAAOia,KAAMG,GAAW/Y,KAAM,YACtD,CAAEsC,KAAMvH,EAAgB+D,SAAU8Z,KAAMI,GAAehZ,KAAM,aAC7D,CAAEsC,KAAMvH,EAAgB2D,QAASka,KAAMK,GAAajZ,KAAM,cAC1D,CAAEsC,KAAMvH,EAAgB8D,OAAQ+Z,KAAMM,GAAYlZ,KAAM,SACxD,CAAEsC,KAAMvH,EAAgByD,OAAQoa,KAAMO,GAAYnZ,KAAM,YACxD,CAAEsC,KAAMvH,EAAgB0D,MAAOma,KAAMQ,GAAWpZ,KAAM,WACtD,CAAEsC,KAAMvH,EAAgBsD,KAAMua,KAAMS,GAAUrZ,KAAM,QACpD,CAAEsC,KAAMvH,EAAgBgE,QAAS6Z,KAAMU,GAAatZ,KAAM,aAC1D,CAAEsC,KAAMvH,EAAgBiE,UAAW4Z,KAAMW,GAASvZ,KAAM,oBACxD,CAAEsC,KAAMvH,EAAgBkE,QAAS2Z,KAAMY,GAAaxZ,KAAM,eAGtDyZ,GAAW,YACyJ,IAD/InF,EAC8I,EAD9IA,UAAW/O,EACmI,EADnIA,SAAUmU,EACyH,EADzHA,sBAAuBC,EACkG,EADlGA,oBAAqB9W,EAC6E,EAD7EA,KAC6E,EAC/I6C,mBAAQ,OAAC4O,QAAD,IAACA,OAAD,EAACA,EAAWhS,MAD2H,mBAChKA,EADgK,KAC1JsX,EAD0J,OAE/IlU,mBAAUI,kBAAQ6S,GAAW9V,IAA9CgX,EAFgK,oBAKvK,SAASC,EAAiBle,GACpBA,GAAGge,EAAQhe,GACf2J,EAAS3J,GAGX,IAAMme,EAAsBL,EAAwBC,GAAwBrX,GAAQvH,EAAgBuD,MAEpG,SAAS0b,EAAe9U,EAAa5C,EAAgBtC,EAAc2F,GACjE,OACE,qBAAIQ,QAAS,kBAAM2T,EAAiBxX,IAApC,UACE,qBAAK+D,IAAKnB,IACV,sBAAMgB,UAAU,UAAhB,SAA2BlG,IACzB2F,GAAY,qBAAKO,UAAU,eAHiB5D,GAQpD,OACE,sBAAK4D,UAAU,WAAf,UACE,qBAAKA,UAAU,UAAUC,QAAS,kBAAM2T,OAAiBna,MACzD,sBAAKuG,UAAU,SAAf,UACE,sBAAKA,UAAU,gBAAf,UACE,qBAAKA,UAAU,eAA2BC,QAAS,kBAAM2T,OAAiBna,IAA1E,SACE,qBAAK0G,IAAK4T,MADsB,SAGlC,oBAAG/T,UAAU,kBAAb,qCAAqDwT,EAArD,QAAiFC,QAEnF,qBAAKzT,UAAU,iBAAf,SACI6T,EACA,+BACIC,EAAeE,GAAWnf,EAAgBuD,MAAO,GAAIvD,EAAgBuD,OAASgE,GAC9EuX,EAAc3Z,KAAI,SAACtE,GAAD,OAAOoe,EAAepe,EAAEgd,KAAMhd,EAAE0G,KAAM1G,EAAEoE,KAAMpE,EAAE0G,MAAQA,SAG9E,+CAAkBqX,EAAlB,2GACE,sBAAMzT,UAAU,QAAhB,SAAwB,qBAAKG,IAAK6T,mB,UC3E1CC,I,OAAc,YACuE,IAD5DC,EAC2D,EAD3DA,OAAgBC,GAC2C,EADnD7V,OACmD,EAD3C6V,gBAG7C,OACE,qBAAKnU,UAAU,eAAf,SACE,sBAAKA,UAAU,UAAf,UACE,sEAEA,sBAAKA,UAAU,UAAf,WACKkU,GACD,gCACE,qBAAKlU,UAAU,YACf,mBAAGA,UAAU,SAAb,oCAGFkU,GAAU,qBAAKlU,UAAU,eAAf,SAA8B,wBAAQA,UAAU,OAAOC,QAAS,kBAAMkU,KAAxC,+BCnBrC,I,OAAA,0qDCAA,wsDCAA,I,OAAA,IAA0B,6CCA1B,OAA0B,mCCYnCC,GAA0C,CAC9C,CAAE3V,KAAM,gFACR,CAAEA,KAAM,4HAA6HO,IAAKqV,IAC1I,CAAE5V,KAAM,gKAA2JO,IAAKgV,IACxK,CAAEvV,KAAM,mHAA8GO,IAAKsV,KAGvHC,GAAW,YAAgI,IAAtHC,EAAqH,EAArHA,QAASlW,EAA4G,EAA5GA,OAA4G,IAApGmW,iBAAoG,MAAxF,EAAwF,IAE3GjV,mBAAS,GAFkG,mBAEtIkV,EAFsI,KAE3HC,EAF2H,KAgB9I,OAZAvU,qBAAU,WACRuU,EAAaF,KACb,CAACA,IAWD,sBAAKzU,UAAU,YAAf,UACIwU,GAAW,qBAAKvU,QAASuU,EAASxU,UAAU,YAC9C,sBAAKA,UAAU,cAAf,UACIwU,GACA,qBAAKxU,UAAU,eAA2BC,QAASuU,EAAnD,SACE,qBAAKrU,IAAK4T,MADsB,SAInCK,GAAMM,GAAWjW,KAChB2V,GAAMM,GAAW1V,KAAO,sBAAMgB,UAAU,QAAhB,SAAwB,qBAAKG,IAAKiU,GAAMM,GAAW1V,QAC7E,sBAAKgB,UAAU,UAAf,UACE,wBAAQ4U,SAAUF,EAAY,EAAGzU,QAhBzC,WACE0U,EAAaD,EAAY,IAenB,SAAyD,qBAAKvU,IAAK0U,OACnE,wBAAQD,SAAUF,EAAYN,GAAMU,OAAQ,EAAG7U,QArBvD,WACE0U,EAAaD,EAAY,IAoBnB,SAAuE,qBAAKvU,IAAK4U,UAEnF,qBAAK/U,UAAU,iBAAf,SAAgC,qBAAKG,IAAK7B,c,S3B3B7CwH,O,qBAAAA,I,mBAAAA,I,sBAAAA,Q,KAkBL,IAAMkP,GAAiB,YAA0H,IAA/GzG,EAA8G,EAA9GA,aAAc7S,EAAgG,EAAhGA,SACxCuZ,EAAYC,iBAA0B,MADkG,EAE1G1V,qBAF0G,mBAEvI2V,EAFuI,KAE3HC,EAF2H,OAGlH5V,mBAASsG,GAAYuP,SAH6F,mBAGvInB,EAHuI,KAG/HoB,EAH+H,OAI9G9V,oBAAS,GAJqG,mBAIvI+V,EAJuI,KAI7HC,EAJ6H,OAK9GhW,oBAAS,GALqG,mBAKvIiW,EALuI,KAK7HC,EAL6H,OAO/HlW,mBAAS+O,EAAazR,MAAMH,MAApCA,EAPuI,sBAStG6C,qBATsG,mBASvItB,EATuI,KASzHyX,EATyH,OAUpFnW,mBAAS,GAV2E,mBAUvIgU,EAVuI,KAUhHoC,EAVgH,OAY7HpW,mBAxBnB,SAAwBlB,GACtB,OAAQA,GACR,IAAK,WACH,OAAOW,EACT,IAAK,UACH,OAAOC,EACT,IAAK,SACH,OAAOC,GAiBiB0W,CAAetH,EAAazR,MAAMwB,SAArDA,EAZuI,oBAcxIgB,EAAUC,cA2FhB,OAxFAa,qBAAU,WACR,GAAK6U,GAAkC,MAArBA,EAAUa,QAA5B,CAGAb,EAAUa,QAAQC,cAAgB,SAAS1gB,GAAKA,EAAE2gB,iBAAkB3gB,EAAE4gB,mBAEtE,IAAMd,EAAa,IAAI7G,GAAW,CAAE3N,OAAQsU,EAAUa,QAASpa,SAAUA,EAAU6S,aAAcA,IAIjG,OAHA4G,EAAWe,KAAK3H,EAAazR,MAAML,gBAAgB,kBAAM6Y,EAAUxP,GAAYqQ,WAC/Ef,EAAcD,GAEP,WACLA,EAAWlN,UACXmN,OAAc3b,OAEhB,CAACwb,IAGH7U,qBAAU,WACR,SAASmS,IACG,OAAV4C,QAAU,IAAVA,KAAY3C,SAGd,OADAtV,OAAOkZ,iBAAiB,SAAU7D,GAC3B,WACK,OAAV4C,QAAU,IAAVA,KAAYlN,UACZ/K,OAAOmZ,oBAAoB,SAAU9D,MAEvC,CAAC4C,IAGH/U,qBAAU,WACR,IAAMkW,EAAM3S,YAAMhB,YAAG4L,EAAazR,OAAOyR,GAAchZ,KAAKghB,iBAAM,MAAMjgB,WAAW,SAACwG,GAClF6Y,OAAgBlc,GACZqD,EAAMoB,cACRyX,EAAgB7Y,EAAMoB,cAExB0X,ETjEN,SAAyC9Y,GAKvC,OAHsBA,EAAMhB,MAAMlC,QAAO,SAAClE,GACxC,OAAOA,EAAE0G,MAAQvH,EAAgBuD,OAASmC,OAAOC,KAAK3F,GAAiB4F,SAAS/E,EAAE0G,SACjF0Y,OS6D0B0B,CAA+B1Z,OAE1D,OAAO,kBAAMwZ,EAAIG,iBACjB,IAGFrW,qBAAU,WACJ+U,IACFA,EAAW1G,qBAAuB8G,GAEhCA,IACU,OAAZhH,QAAY,IAAZA,KAAcgB,QAAQ5X,EAAQsG,WAAY,CAAEE,QAAI1E,OAElD,CAAC8b,EAAUJ,IAEb/U,qBAAU,WACJ+U,GAAcjB,GAAUpO,GAAY4Q,UACtCvB,EAAWlT,QAAS,KACrB,CAACiS,IAoCF,sBAAKlU,UAAU,kBAAf,UACE,wBAAQ2W,IAAK1B,EAAW9W,GAAG,eAAeyY,eAAa,OAAOC,gBAAiB,SAACxhB,GAAD,OAAOA,EAAE2gB,oBACtF9B,GAAUpO,GAAY4Q,QACtB,cAAC,GAAD,CACEpY,OAAQA,EACR4V,OAAQA,GAAUpO,GAAYuP,QAC9BlB,eAAgB,kBAAMmB,EAAUxP,GAAY4Q,YAE9C,iCACKnB,GACD,sBAAKvV,UAAU,cAAf,UACE,wBAAQA,UAAU,cAAcC,QAAS,kBAAMyV,GAAY,IAA3D,eACA,sBAAK1V,UAAU,YAAf,UACE,wBAAQC,QAAS,kBAAMuV,GAAY,IAAnC,oBACA,cAAC,GAAD,CAAasB,MAAOtD,EAAuBuD,QAASrb,EAASsb,wBAInE,qBAAKhX,UAAU,iBAAf,SACKuV,EASD,sBAAKvV,UAAU,gBAAf,UACE,yBAAQC,QAAS,kBAAMuV,GAAY,IAAnC,UAA2C,qBAAKrV,IAAKI,KAArD,eAEA,yBAAQN,QAAS,WArD7BX,EAAQjI,KAAK,kBAqDoC2I,UAAU,aAA/C,mBAAkE,qBAAKG,IAAK4U,WAX9E,sBAAK/U,UAAU,cAAf,UACE,wBAAQA,UAAU,cAAcC,QA9B9C,WACY,OAAVkV,QAAU,IAAVA,KAAYlU,OAAOgW,cA6BP,SAAqD,qBAAK9W,I4BxK3D,i0C5ByKC,qBAAKH,UAAU,cAAf,SACE,qBAAKG,IAAK7B,MAEZ,wBAAQ0B,UAAU,cAAcC,QA9B9C,WACY,OAAVkV,QAAU,IAAVA,KAAYlU,OAAOiW,eA6BP,SAAsD,qBAAK/W,I6B5K5D,22C7BsLa1G,GAAhByE,GACA,cAAC,GAAD,CACEkQ,UAAS,OAAEG,QAAF,IAAEA,OAAF,EAAEA,EAAczR,MAAMhB,MAAMoC,GACrCsV,sBAAuBA,EACvBC,oBAAqB/X,EAASsb,gBAC9B3X,SAzEZ,SAA0BjD,GACpBA,IACU,OAAZmS,QAAY,IAAZA,KAAcgB,QAAQ5X,EAAQyG,YAAa,CAAEhC,KAAMA,KACzC,OAAZmS,QAAY,IAAZA,KAAcgB,QAAQ5X,EAAQsG,WAAY,CAAEE,QAAI1E,KAuEtCkD,KAAMA,OAMZ8Y,GACA,cAAC,GAAD,CACEnX,OAAQA,GAAU,GAClBkW,QAASN,GAAUpO,GAAY4Q,QAAW,kBAAMhB,GAAY,SAAUjc,EACtEgb,UAAWP,GAAUpO,GAAY4Q,QAAU,EAAI,QAQnDS,GAAc,YAAsF,IAA3EL,EAA0E,EAA1EA,MAAOC,EAAmE,EAAnEA,QACpC,OACE,sBAAK/W,UAAU,eAAf,UACE,qBAAKG,IAAKiX,KACV,iCAAON,EAAP,IAAeC,S8BlNN,I,OAAA,IAA0B,kCCA1B,OAA0B,mCCYnCnY,GAAe,IAAIC,IAEzBD,GAAaE,IAAI,OAAQ,CACvBC,MAAO,WACPN,KAAM,sFACNO,IAAKqY,KAGPzY,GAAaE,IAAI,QAAS,CACxBC,MAAO,OACPN,KAAM,8IACNO,IAAKsY,KAGP,IAAMC,GAAgB,YAAgH,IAAD,MAApGlY,EAAoG,EAApGA,SAAU1C,EAA0F,EAA1FA,KACnC2C,EAAUC,cADmH,EAEnGC,qBAFmG,mBAE5HC,EAF4H,KAElHC,EAFkH,KAI7H8X,EAAc5X,kBAAwB,CAAC,OAAQ,SAAUjD,GAJoE,IAU3HkD,EAAaC,cAAbD,SAeR,SAAS4X,EAAgBrb,GACvB,OACE,qBAAgB4D,UAAU,YAAYC,QAAS,kBArBnD,SAA2B7D,GACzBsD,EAAYtD,GAoB2Csb,CAAkBtb,IAAvE,SACE,qBAAK4D,UAAU,OAAf,SACE,qBAAKG,IAAa,QAAR/D,EAAiBib,GAAUC,QAF/Blb,GAQd,OAxBAgE,qBAAU,WACRlD,OAAOmD,SAAS,EAAG,KAClB,CAACR,IAuBF,sBAAKG,UAAU,iBAAf,UACE,mEACA,mBAAGA,UAAU,QAAb,6DAGA,qBAAKA,UAAU,iBAAf,SACIwX,EAAYxd,KAAI,SAAC2d,GAAD,OAAOF,EAAgBE,QAEzClY,GACA,sBAAKO,UAAU,sBAAf,UACE,qBAAKA,UAAU,YACf,sBAAKA,UAAU,SAAf,UACE,uCAAKpB,GAAa0B,IAAIb,UAAtB,aAAK,EAA4BV,QACjC,qBAAKoB,IAAG,UAAEvB,GAAa0B,IAAIb,UAAnB,aAAE,EAA4BT,MACtC,sCAAIJ,GAAa0B,IAAIb,UAArB,aAAI,EAA4BhB,OAChC,sBAAKuB,UAAU,eAAf,UACE,wBAAQA,UAAU,QAAQC,QA/BtC,WACEP,OAAYjG,IA8BF,SAA6C,qBAAK0G,IAAKI,MACvD,wBAAQP,UAAU,QAAQC,QAtCtC,WACMR,GACFJ,EAASI,GACXH,EAAQjI,KAAK,gBAmCH,SAA8C,qBAAK8I,IAAKK,mBC/EvD,I,OAAA,IAA0B,yCCQnCoX,GAAkB,YAA8G,IAAnGC,EAAkG,EAAlGA,SAAUC,EAAwF,EAAxFA,QACrCxY,EAAUC,cADmH,EAE3GC,mBAASsY,GAFkG,mBAE5HrZ,EAF4H,KAEtHsZ,EAFsH,SAU3HlY,EAAaC,cAAbD,SAMR,OALAO,qBAAU,WACRlD,OAAOmD,SAAS,EAAG,KAClB,CAACR,IAIF,sBAAKG,UAAU,mBAAf,UACE,uDACA,qBAAKA,UAAU,QAAf,SAAuB,qBAAKG,IAAK6X,OACjC,mBAAGhY,UAAU,QAAb,oLAGA,qBAAKA,UAAU,aAAf,SACE,0BACEiY,YAAY,oCACZxhB,MAAOgI,EACPyZ,SAAU,SAAC7iB,GAAD,OAAO0iB,EAAQ1iB,EAAE8F,OAAO1E,YAGtC,qBAAKuJ,UAAU,SAAf,SACE,yBAAQC,QAAS,kBAzBrB4X,EAASpZ,QACTa,EAAQjI,KAAK,cAwBT,uBAAuD,qBAAK2I,UAAU,QAAQG,ICvCvE,ogCCAA,I,OAAA,IAA0B,sCCQnCgY,GAAe,WACnB,IAAM7Y,EAAUC,cAERM,EAAaC,cAAbD,SAKR,OAJAO,qBAAU,WACRlD,OAAOmD,SAAS,EAAG,KAClB,CAACR,IAGF,sBAAKG,UAAU,gBAAf,UACE,gDACA,qBAAKA,UAAU,QAAf,SAAuB,qBAAKG,IAAKiY,OACjC,sBAAKpY,UAAU,QAAf,uGACyF,uBADzF,4KAGE,qBAAKA,UAAU,SAASC,QAAS,kBAAMX,EAAQjI,KAAK,MAApD,SAA0D,iDAAmB,qBAAK2I,UAAU,QAAQG,ICvB7F,2gCD0BT,qBAAKH,UAAU,YAAf,SACE,wBAAQC,QAAS,kBAAMX,EAAQjI,KAAK,eAApC,6BEpBFghB,I,OAAY,YAAqE,IAA3DC,EAA0D,EAA1DA,QACpBhZ,EAAUC,cADoE,EAElDC,oBAAS,GAFyC,mBAE7E+Y,EAF6E,KAEpEC,EAFoE,KAiBpF,OAPApY,qBAAU,WACRqY,YAAW,WACTD,GAAe,GACftb,OAAOmD,SAAS,EAAG,KACnB,OACF,IAGA,sBAAKL,UAAU,aAAf,UACE,qBAAKA,UAAYuY,EAAU,gBAAkB,OAA7C,SACE,uBAAO9N,MAAM,MAAMC,OAAO,MAAMgO,UAAQ,EAAC5G,MAAI,EAAC6G,OAAK,EAAnD,SACE,wBAAQxY,IAAI,0BAA0B/D,KAAK,kBAG/C,sBAAK4D,UAAU,UAAf,UACE,sBAAKA,UAAU,QAAf,UACE,gEADF,iQAEuP,uBAFvP,8BAG6B,uBAH7B,iKAK0E,uBACxE,sBAAMA,UAAU,SAAhB,SACE,yBAAQC,QA5BlB,WACMqY,GAASA,IACbhZ,EAAQjI,KAAK,YA0BL,kBAAuC,qBAAK2I,UAAU,QAAQG,ICvC3D,2jBD0CP,qBAAKH,UAAU,YAAf,SACE,wBAAQC,QAAS,kBAAMX,EAAQjI,KAAK,eAApC,iCE3CK,I,OAAA,IAA0B,wCCOnCuhB,GAAgB,WACpB,IAAMtZ,EAAUC,cAERM,EAAaC,cAAbD,SAKR,OAJAO,qBAAU,WACRlD,OAAOmD,SAAS,EAAG,KAClB,CAACR,IAGF,sBAAKG,UAAU,iBAAf,UACE,2CACA,qBAAKA,UAAU,QAAf,SAAuB,qBAAKG,IAAK0Y,OACjC,oBAAG7Y,UAAU,QAAb,UACE,4DAEA,uBAAMA,UAAU,YAAhB,qDAC0C,uBAD1C,yDAEkD,uBAChD,mBAAG8Y,KAAK,qCAAR,2CAGF,uBAAM9Y,UAAU,YAAhB,6BACgB,uBADhB,oBAEiB,mBAAG8Y,KAAK,iCAAR,mCAAkE,uBAFnF,mBAMA,uBAAM9Y,UAAU,YAAhB,yCAC4B,uBAD5B,iBAEc,mBAAG8Y,KAAK,gCAAR,kCAAgE,uBAF9E,gBAGa,mBAAGA,KAAK,uBAAR,gCAGf,qBAAK9Y,UAAU,SAASC,QAAS,kBAAMX,EAAQjI,KAAK,MAApD,SAA0D,+DCzB1D0hB,GAAc,gBAEdC,GAAgC,CACpChd,SAFW,EAGXyO,MAAOwO,IACPvO,OAAQuO,IACRhY,OAAQ,CACNL,KAAM,GAERlE,QAAS,OACTsa,gBAAiB,GAwEJkC,GArEH,WAAiC,IAAD,EACF1Z,qBADE,mBACnC+O,EADmC,KACrB4K,EADqB,OAEF3Z,qBAFE,mBAEnC4Z,EAFmC,KAErBC,EAFqB,iDAoB1C,sBAAAliB,EAAA,sDACEmiB,MAAMP,GAAa,CACjBQ,OAAQ,OACRC,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBC,KAAMlc,KAAKM,UAAL,OAAe0Q,QAAf,IAAeA,OAAf,EAAeA,EAAczR,SAClC4c,OAAO,SAACjc,GACTC,QAAQic,MAAMlc,MACbmc,MAAK,WACM,OAAZrL,QAAY,IAAZA,KAAcsL,WAXlB,4CApB0C,sBAoC1C,OA/BAzZ,qBAAU,WACR+Y,EAAgB,IAAI1d,EAAaud,OACjC,IAGF5Y,qBAAU,WACRiZ,EAAe,OAAC9K,QAAD,IAACA,OAAD,EAACA,EAAczR,OAC9B,IAAMgd,EAAY,OAAGvL,QAAH,IAAGA,OAAH,EAAGA,EAAcjY,WAAU,SAACwG,GAC5Cuc,EAAgBvc,MAElB,OAAO,WACO,OAAZgd,QAAY,IAAZA,KAAcrD,iBAEf,CAAClI,IAmBF,qBAAKvO,UAAU,MAAf,SACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAO+Z,KAAK,UAAZ,SACE,cAAC,EAAD,CAAY1a,SAAU,SAAClI,GAAD,cAAOoX,QAAP,IAAOA,OAAP,EAAOA,EAAcgB,QAAQ5X,EAAQ0G,UAAW,CAACC,OAAQnH,KAAKwF,MAAkB,OAAZyc,QAAY,IAAZA,OAAA,EAAAA,EAAczc,OAAQ,MAElH,cAAC,IAAD,CAAOod,KAAK,aAAZ,SACE,cAAC,GAAD,CAAe1a,SAAU,SAAC3J,GAAD,cAAO6Y,QAAP,IAAOA,OAAP,EAAOA,EAAcgB,QAAQ5X,EAAQ4G,kBAAmB,CAACnC,KAAM1G,KAAKiH,MAAkB,OAAZyc,QAAY,IAAZA,OAAA,EAAAA,EAAczc,OAAQ,MAE3H,cAAC,IAAD,CAAOod,KAAK,cAAZ,SACIxL,GAAgB,cAAC,GAAD,CAAgBA,aAAcA,EAAc7S,SAAUsd,OAE1E,cAAC,IAAD,CAAOe,KAAK,gBAAZ,SACE,cAAC,GAAD,CACEjC,SAAqB,OAAZsB,QAAY,IAAZA,OAAA,EAAAA,EAAc1a,UAAW,GAClCmZ,SAAU,SAACniB,GAAoB,OAAZ6Y,QAAY,IAAZA,KAAcgB,QAAQ5X,EAAQ6G,eAAgB,CAAEC,KAAM/I,IApD3C,mCAoDgDmiB,QAElF,cAAC,IAAD,CAAOkC,KAAK,YAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,aAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,IAAZ,SACE,cAAC,GAAD,cCpFZC,IAAS5H,OACP,cAAC,IAAM6H,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.b14ce63c.chunk.js","sourcesContent":["import { AbstractAssetTask, AssetsManager, ContainerAssetTask, Scene, TextureAssetTask } from '@babylonjs/core'\nimport { Texture } from '@babylonjs/core/Materials/Textures/texture'\nimport { Mesh } from '@babylonjs/core/Meshes/mesh'\nimport { PlayGroundType } from '../state'\nimport { Animation } from '@babylonjs/core'\nimport { PromiseResolveSerial } from './utils'\n\nenum SelectableTiles {\n  grass = 'grass',\n  tree = 'tree',\n  trampolin = 'trampolin',\n  slide = 'slide',\n  sandbox = 'sandbox',\n  house = 'house',\n  boulders = 'boulders',\n  swings = 'swings',\n  seasaw = 'seasaw',\n  carousel = 'carousel',\n  playhut = 'playhut',\n  junglegym = 'junglegym',\n  springs = 'springs'\n}\n\n//tiles for plansche\nenum FixedTiles { \n  empty = 'empty',\n  pool = 'pool',\n  river = 'river',\n  lighttower = 'lighttower',\n  alley1 = 'alley1',\n  alley2 = 'alley2',\n  trees1 = 'trees1',\n  trees2 = 'trees2'\n}\n\ntype TileType = SelectableTiles | FixedTiles\n\ntype TileAnimation = { target: string, anim: Animation, fixedSpeed: boolean }\ntype TileMeshItem = { mesh: Mesh, animations: TileAnimation[] }\ntype TileMeshArray = { [name : string] : TileMeshItem }\ntype TextureArray = { [name : string] : Texture }\n\nfunction onTaskCompleted<Type>(task: AbstractAssetTask) : Promise<Type> {\n  return new Promise((resolve) => {\n    task.onSuccess = (task) => resolve(task)\n  })\n}\n\nconst loadAssets = async function(scene : Scene, playGroundType: PlayGroundType) : Promise<{ tileMeshes: TileMeshArray, textures: TextureArray}> {\n  const assetsManager = new AssetsManager(scene)\n  assetsManager.useDefaultLoadingScreen = false\n\n  const tasks = await PromiseResolveSerial([\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.tree, 'assets/meshes/' ,'tile_trees.min.gltf')), \n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.grass, 'assets/meshes/' ,'tile_grass.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.trampolin, 'assets/meshes/' ,'tile_trampolin.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.swings, 'assets/meshes/' ,'tile_swings.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.slide, 'assets/meshes/' ,'tile_slide.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.sandbox, 'assets/meshes/' ,'tile_sandbox.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.house, 'assets/meshes/' ,'tile_house.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.boulders, 'assets/meshes/' ,'tile_boulders.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.seasaw, 'assets/meshes/' ,'tile_seasaw.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.carousel, 'assets/meshes/' ,'tile_carousel.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.playhut, 'assets/meshes/' ,'tile_playhut.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.junglegym, 'assets/meshes/' ,'tile_junglegym.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', SelectableTiles.springs, 'assets/meshes/' ,'tile_springs.min.gltf')),\n\n    // Load pool or river tiles\n    playGroundType == 'pool' ? \n      onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', FixedTiles.pool, 'assets/meshes/waterbodies/' ,'tile_pool.min.gltf'))\n      : onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', FixedTiles.river, 'assets/meshes/waterbodies/' ,'tile_stream.min.gltf')),\n\n    // load fixed tiles\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', FixedTiles.lighttower, 'assets/meshes/fixed/' ,'tile_lighttower.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', FixedTiles.alley1, 'assets/meshes/fixed/' ,'tile_alley1.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', FixedTiles.alley2, 'assets/meshes/fixed/' ,'tile_alley2.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', FixedTiles.trees1, 'assets/meshes/fixed/' ,'tile_trees1.min.gltf')),\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addContainerTask('tile', FixedTiles.trees2, 'assets/meshes/fixed/' ,'tile_trees2.min.gltf')),\n\n    // load textures\n    onTaskCompleted<AbstractAssetTask>(assetsManager.addTextureTask('texture-fountain','assets/textures/flare.png')),\n\n    // start asset loading\n    new Promise((resolve) => { \n      assetsManager.load() \n      resolve(undefined) \n    })\n  ])\n\n  // load tile meshes\n  const tileMeshes = tasks\n    .filter((task) => {\n      return task instanceof ContainerAssetTask && task.name.startsWith('tile')\n    }).map((task) => (task as ContainerAssetTask))\n    .reduce<TileMeshArray>((acc, task) => {\n      // clone meshes\n      const mesh = task.loadedContainer.instantiateModelsToScene((name) => name, false).rootNodes[0] as Mesh\n    \n      // save animations + name of targets\n      const fixedAnimationSpeed = Object.keys(FixedTiles).includes(task.meshesNames)\n      const animations = task.loadedAnimationGroups.reduce<TileAnimation[]>((acc, curr) => {\n        curr.stop()\n        curr.targetedAnimations.forEach((anim) => {\n          acc.push({ anim: anim.animation, target: anim.target.name, fixedSpeed: fixedAnimationSpeed })\n        })\n        return acc\n      },[])\n\n      // console.log(animations)\n      mesh?.setEnabled(false)\n      acc[task.meshesNames] = { mesh: mesh, animations: animations }\n      return acc\n    }, {})\n\n  // load textures\n  const textures = tasks\n    .filter((task) => {\n      return task instanceof TextureAssetTask\n    })\n    .map((task) => (task as TextureAssetTask))\n    .reduce<TextureArray>((acc, task) => {\n      acc[task.name] = task.texture\n      return acc\n    },{})\n\n  return Promise.resolve({ tileMeshes: tileMeshes, textures: textures})\n}\n\nexport { loadAssets, SelectableTiles, FixedTiles }\nexport type { TileType, TileMeshArray, TextureArray }\n\n","import { minBy } from 'lodash'\nimport { Observable } from 'rxjs/internal/Observable'\nimport { interval } from 'rxjs/internal/observable/interval'\nimport { scan } from 'rxjs/internal/operators/scan'\nimport { share } from 'rxjs/internal/operators/share'\nimport { takeWhile } from 'rxjs/internal/operators/takeWhile'\nimport { Subject } from 'rxjs/internal/Subject'\n\nconst fromHammerEvent = function(hammer: HammerManager, event: string) : Observable<HammerInput> {\n  const subject = new Subject<HammerInput>()\n  hammer.on(event,(e: HammerInput) => {\n    subject.next(e)\n  })\n  return subject.pipe(share())\n}\n\nconst easeInOut = function (t : number) : number { \n  return t<.5 ? 2*t*t : -1+(4-2*t)*t \n}\n\nconst easeOut = function (t : number) : number { \n  return t*(2-t)\n}\n\nconst animateValue = function(from: number, to:number, time : number, steps = time/40, callback : (v : number, finished: boolean) => void) : void {\n  const timeBetweenSteps = time/steps\n  interval(timeBetweenSteps).pipe(scan( (acc) => {\n    return acc + 1/steps\n  }, 0), takeWhile((t) => t < 1)).subscribe({\n    next: (t) => {\n      callback(from + (to-from) * easeInOut(t), false)\n    },\n    complete: () => {\n      callback(to, true)\n    }\n  })\n}\n\nfunction snapTo(value : number, snapPositions : number[]) : number {\n  return minBy(snapPositions, (p) => {\n    return Math.abs(value - p)\n  }) || value\n}\n\nfunction constrainRad(value: number) : number {\n  while ( value < 0) {\n    value += Math.PI * 2\n  }\n  while (value > Math.PI * 2) {\n    value -= Math.PI * 2\n  }\n  return value\n}\n\nfunction radDifference(value1: number, value2: number) : number {\n  const diff = value1 - value2\n  return (diff + Math.PI) % (Math.PI * 2) - Math.PI\n}\n\nasync function PromiseResolveSerial(promises : Promise<unknown>[]) : Promise<unknown[]> {\n  const results = []\n  for(const p of promises) {\n    results.push(await p)\n  }\n  return results\n}\n\nexport { fromHammerEvent, animateValue, radDifference, constrainRad, snapTo, easeInOut, easeOut, PromiseResolveSerial }","import _ from 'lodash'\nimport { Subject } from 'rxjs'\nimport { SelectableTiles } from './babylon/assets'\nimport { PlaygroundSettings } from './babylon/playground'\nimport { TileState } from './babylon/tiles'\n\ntype Avatar = 'builder'|'explorer'|'social'\ntype PlayGroundType = 'pool'|'river'\n\ntype State = {\n  tiles : TileState[]\n  selectedTile?: number\n  avatar?: Avatar\n  playgroundType: PlayGroundType\n  missing? : string\n  version: string\n  seed: number\n}\n\nenum Actions {\n  selectTile,\n  setTileType,\n  setAvatar,\n  setPlaygroundType,\n  setMissingText,\n  setupTile\n}\n\nfunction  calculateNumberOfSelectedTiles(state: State) : number {\n  // console.log('tile', Object.values(SelectableTiles))\n  const selectedTiles = state.tiles.filter((t) => {\n    return t.type != SelectableTiles.grass && Object.keys(SelectableTiles).includes(t.type)\n  }).length\n  return selectedTiles\n}\n\nclass Statemachine extends Subject<State> {\n\n  static STORAGE_KEY = 'pg-state'\n\n  private _state : State\n  private _initialState : State\n  private _settings: PlaygroundSettings\n\n  constructor(settings: PlaygroundSettings) {\n    super()\n    this._settings = settings\n    // set initial state\n    this._initialState = {\n      tiles: Array(this._settings.gridSize * this._settings.gridSize).fill(null).map( (v,i) => { \n        return { \n          type: SelectableTiles.grass, \n          rotation: <number>_.sample([Math.PI, 0, Math.PI / 2, Math.PI * 1.5]), \n          index: i\n        }\n      }),\n      playgroundType: 'pool',\n      version: this._settings.version,\n      seed: Math.floor(Math.random() * 1000)\n    }\n    this._state = this._initialState\n    // load state from storage\n    this.load()\n    this.next(this.state)\n  }\n\n  reset() : void {\n    this._state = this._initialState\n    this.save()\n    this.next(this.state)\n  }\n\n  load() : void {\n    const storage = window.localStorage\n    const item = storage.getItem(Statemachine.STORAGE_KEY) || ''\n    try {\n      const data = JSON.parse(item)\n      // only use data if the version is same\n      if (data.version == this._state.version)\n        this._state = { ...this._state, ...data,}\n    } catch (err) {\n      console.warn('could not load data from storage')\n    }\n  }\n\n  save() : void {\n    const storage = window.localStorage\n    storage.setItem(Statemachine.STORAGE_KEY, JSON.stringify(this._state))\n  }\n\n  get state() : State {\n    return _.cloneDeep(this._state) \n  }\n\n  trigger(action: Actions, args: any) : void {\n    if (action == Actions.selectTile) {\n      this._state.selectedTile = args.id\n    } else if (action == Actions.setTileType && this._state.selectedTile != undefined ) {\n      this._state.tiles[this._state.selectedTile].type = args.type\n      this._state.tiles[this._state.selectedTile].rotation = _.sample([0, Math.PI, 3/2*Math.PI, 2*Math.PI]) || 0\n    } else if (action == Actions.setAvatar && args.avatar ) {\n      this._state.avatar = args.avatar\n    } else if (action == Actions.setPlaygroundType && args.type ) {\n      this._state.playgroundType = args.type\n    } else if (action == Actions.setMissingText && args.text ) {\n      this._state.missing = args.text\n    } else if (action == Actions.setupTile && \n        args.id != undefined && args.type && args.rotation != undefined) {\n      this._state.tiles[args.id].type = args.type\n      this._state.tiles[args.id].rotation = args.rotation\n    } else {\n      console.warn('Statemachine: could not find any action handler')\n    }\n    this.next(this.state)\n    this.save()\n  }\n}\n\nexport { Statemachine, Actions, calculateNumberOfSelectedTiles }\nexport type { State, PlayGroundType, Avatar }","export default __webpack_public_path__ + \"static/media/explorer.0729c357.png\";","export default __webpack_public_path__ + \"static/media/builder.31b27d0d.png\";","export default __webpack_public_path__ + \"static/media/two_kids.d4db4a4d.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAABCklEQVR4Ae3RwTFEYRCFUWsmCXFQiEQqnZYNYDLC+umFUp3A/LfqzTlVHUB/94J/AAAAAAAAAABc9j3KkIv/3Lf1lRy5+JsR8vGNsDD+y4xuhHx8IwTj738A8cV/3VV88RFffMQXH/HF56rvTXzxT098xBdf/Hfxxd8z8cVH/Ju+p76D+Ovd9n39PXVcO4L4dyP+NkdYHP/jHOPf932PxxaOIP7DjL92BPGv+37GY4tGEH+qvi00wiEQ3wgj/mcgvhEC8Y0Qim+EfHwjzPjHQHwjBOIbIRnfCPn4RgjHN0I+vhHEP5HKx6fy8al8fCofn8rHp/LxqXx8Kh+fysen9hIfAAAAAAAAAH4BXnnYZhHuUdwAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAAuUlEQVR42u3VSw7BYBhG4W+MNRrbRUWEVbnbV7UMxFhJ3+Y57wbOSf5LFQAAAAD8hqbW2fptt022fr9ttn6/XbZ+v322fr9Vtv69FvTp06dPnz59+vTp06dPnz59+gPp/2Ph+m26fpuuL2ACR2gCl3gCz+gEPjIJ4064SRhBwrXmEiR8n3CRIEHCc2cJI0g41UyCBAndjhIkDJFwyE9YViUnNBVGk63/mRCp/06I1X8lROsDAAAAGDMP5dIlT2gEqj8AAAAASUVORK5CYII=\"","import React, { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router'\nimport { Avatar } from '../state'\n\nimport explorerImage from '../assets/images/explorer.png'\nimport builderImage from '../assets/images/builder.png'\nimport kidsImage from '../assets/images/two_kids.png'\n\nimport checkIcon from '../assets/images/check.png'\nimport backIcon from '../assets/images/arrow_back.png'\n\nimport './AvatarView.scss'\nimport { useLocation } from 'react-router-dom'\nimport { shuffle } from 'shuffle-seed'\n\nconst descriptions = new Map<Avatar,{title: string, text: string, img: string}>()\n\ndescriptions.set('explorer', {\n  title: 'Entdecker / innen',\n  text: 'Entdecker/innen sind neugierig und möchten gerne herumlaufen und alles erkunden.',\n  img: explorerImage\n})\n\ndescriptions.set('builder', {\n  title: 'Denker / innen',\n  text: 'Denker/innen bauen gerne Dinge. Sie gehen den Sachen auf den Grund.',\n  img: builderImage\n})\n\ndescriptions.set('social', {\n  title: 'Freunde',\n  text: 'Freunde machen alles gemeinsam.',\n  img: kidsImage\n})\n\nconst AvatarView = function({ onSelect, seed } : { onSelect: (avatar: Avatar) => void, seed: number }) : React.ReactElement {\n  const history = useHistory()\n\n  const [selected, setSelected] = useState<Avatar|undefined>()\n\n  const avatars = shuffle<Avatar>(['explorer','social','builder'], seed)\n\n  const { pathname } = useLocation()\n  useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [pathname])\n\n  function onAvatarSelect(avatar: Avatar) {\n    setSelected(avatar)\n    // history.push('/waterbody')\n  }\n\n  function onConfirm() {\n    if (selected)\n      onSelect(selected)\n    history.push('/waterbody')\n  }\n\n  function onReject() {\n    setSelected(undefined)\n  }\n\n  function renderAvatarImage(avatar: Avatar) {\n    const img = avatar == 'explorer' ? explorerImage : avatar == 'builder' ? builderImage : kidsImage\n    return(\n      <div key={avatar} className=\"avatar\" onClick={() => onAvatarSelect(avatar)}>\n        <div className=\"icon\">\n          <img src={img}></img>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"avatar-view\">\n      <h1>Wähle deinen Avatar</h1>\n      <div className=\"avatar-list\">\n        { avatars.map((a) => renderAvatarImage(a)) }\n      </div>\n      { selected && \n        <div className=\"avatar-select-dialog\">\n          <div className=\"overlay\"></div>\n          <div className=\"dialog\">\n            <h2>{descriptions.get(selected)?.title}</h2>\n            <img src={descriptions.get(selected)?.img}></img>\n            <p>{descriptions.get(selected)?.text}</p>\n            <div className=\"button-group\">\n              <button className=\"round\" onClick={onReject}><img src={backIcon}></img></button>\n              <button className=\"round\" onClick={onConfirm}><img src={checkIcon}></img></button>\n            </div>\n          </div>\n        </div>\n      }\n    </div>\n  )\n}\n\nexport { AvatarView }\n","import { Camera, Scene, UniversalCamera, Vector2, Vector3 } from '@babylonjs/core'\nimport { combineLatest, fromEvent, of, Subject, merge } from 'rxjs'\nimport { filter, skipWhile, switchMap, takeUntil } from 'rxjs/operators'\nimport Hammer from 'hammerjs'\n\nimport { animateValue, constrainRad, fromHammerEvent, snapTo } from './utils'\n\nconst MAX_ZOOM = 10\nconst MIN_ZOOM = 1\n\nconst MAX_X = 4\nconst MAX_Y = 4\n\nconst DISTANCE = 10\n\nconst ROTATION_THRESHOLD = 5\nconst PINCH_THRESHOLD = 0.1\n\nconst ROTATION_SNAP_POSITIONS = [ Math.PI * 1/4, Math.PI * 3/4, Math.PI * 5/4, Math.PI * 7/4]\n\nfunction multiplyMatrixAndPoint(matrix : [number, number, number, number], point : [number, number]) : [number, number] {\n  return [ point[0] * matrix[0] + point[1] * matrix[1], point[0] * matrix[2] + point[1] * matrix[3] ]\n}\n\nclass OrthographicCamera {\n\n  private scene : Scene\n  private canvas : HTMLCanvasElement\n\n  private _cursor : Vector2\n  private _zoom : number\n\n  private aspectRatio : number\n  private _rotation : number\n\n  camera : UniversalCamera\n\n  private $disposeObservable: Subject<void>\n\n  private _isAnimating = false\n\n  enableControl = true\n\n  constructor(scene: Scene, canvas: HTMLCanvasElement, zoom: number) {\n    this.scene = scene\n    this.canvas = canvas\n\n    this._cursor = new Vector2(0,0)\n    this._zoom = zoom\n    this._rotation = Math.PI / 4\n\n    this.camera = new UniversalCamera('camera', new Vector3(0,DISTANCE,0), scene)\n    this.camera.mode = Camera.ORTHOGRAPHIC_CAMERA\n\n    this.aspectRatio = this.scene.getEngine().getAspectRatio(this.camera)\n\n    this.updateCameraFrame()\n    this.updateCameraPosition()\n\n    this.$disposeObservable = new Subject()\n  }\n\n  dispose() : void {\n    this.$disposeObservable.next()\n  }\n\n  attachControl() : void {\n\n    const mc = new Hammer(this.canvas)\n\n    // react to pinching\n    mc.get('pinch').set({ enable: true, threshold: PINCH_THRESHOLD })\n    const $pinchStart = fromHammerEvent(mc, 'pinchstart')\n    const $pinchEnd = fromHammerEvent(mc, 'pinchend')\n    const $pinchMove = fromHammerEvent(mc, 'pinchmove')\n\n    // react to rotating\n    mc.get('rotate').set({ enable: true })\n    const $rotateStart = fromHammerEvent(mc, 'rotatestart')\n    const $rotateEnd = fromHammerEvent(mc, 'rotateend')\n    const $rotateMove = fromHammerEvent(mc, 'rotatemove')\n\n    const $pinchObservable = $pinchStart.pipe(switchMap( () =>\n      combineLatest([$pinchMove, of(this._zoom)])\n        .pipe(takeUntil($pinchEnd))\n    ), takeUntil(this.$disposeObservable))\n\n    $pinchObservable.pipe(filter(() => this.enableControl)).subscribe(([move, zoom]) => {\n      this.zoom = zoom / move.scale\n    })\n\n    const $rotateObservable = $rotateStart.pipe(switchMap( (start) =>\n      combineLatest([$rotateMove, of(start), of(this.rotation)])\n        .pipe(skipWhile( ([move, start]) => {\n          return Math.abs(start.rotation - move.rotation) < ROTATION_THRESHOLD\n        }),takeUntil($rotateEnd))\n    ), takeUntil(this.$disposeObservable))\n\n    $rotateObservable.pipe(filter(() => this.enableControl)).subscribe(([move, start, rot]) => {\n      const drot = start.rotation - move.rotation\n      this.rotation = rot - drot / 180 * Math.PI\n    })\n\n    // react to scrolling\n    const $pointerDown = fromEvent<PointerEvent>(this.canvas,'pointerdown').pipe(filter((e) => e.isPrimary))\n    const $pointerUp = fromEvent<PointerEvent>(this.canvas,'pointerup').pipe(filter((e) => e.isPrimary))\n    const $pointerMove = fromEvent<PointerEvent>(this.canvas,'pointermove').pipe(filter((e) => e.isPrimary))\n    const $pointerDownMultiple = fromEvent<PointerEvent>(this.canvas,'pointerdown').pipe(filter((e) => !e.isPrimary))\n\n    const $dragObservable = $pointerDown.pipe(switchMap( (down) =>\n      combineLatest([$pointerMove, of(down), of(this._cursor.clone())])\n        .pipe(takeUntil(merge($pointerUp,$pointerDownMultiple)))\n    ), takeUntil(this.$disposeObservable))\n\n    $dragObservable.pipe(filter(() => this.enableControl)).subscribe( ([move, down, cursor]) => {\n      const dx = down.screenX - move.screenX\n      const dy = down.screenY - move.screenY\n      \n      const mat = this.getRotationMatrix()\n      const dvec = multiplyMatrixAndPoint(mat, [dy, dx])\n      const zoomDivisor = 70 * 6/this.zoom\n\n      this.setCameraCenter(cursor.x + dvec[0]/zoomDivisor, cursor.y + dvec[1]/zoomDivisor)\n    })\n\n    // react to mousewheel\n    const $wheelTurn = fromEvent<WheelEvent>(window,'wheel')\n    $wheelTurn.pipe(filter(() => this.enableControl)).subscribe( (e) => {\n      this.zoom -= Math.sign(e.deltaY) * 0.5\n    })\n    \n  }\n\n  onResize() : void {\n    this.aspectRatio = this.scene.getEngine().getAspectRatio(this.camera)\n    this.updateCameraFrame()\n  }\n\n  updateCameraFrame() : void {\n    this.camera.orthoTop = this._zoom\n    this.camera.orthoBottom = -this._zoom\n    this.camera.orthoRight = this._zoom * this.aspectRatio\n    this.camera.orthoLeft = -this._zoom * this.aspectRatio\n  }\n\n  updateCameraPosition() : void {\n    this.camera.position.x = this._cursor.x + Math.cos(this._rotation) * DISTANCE\n    this.camera.position.z = this._cursor.y + Math.sin(this._rotation) * DISTANCE\n    this.camera.setTarget(new Vector3(this._cursor.x,0,this._cursor.y))\n  }\n\n  setCameraCenter(x : number,y : number) : void {\n    x = Math.max(-MAX_X, Math.min(MAX_X, x))\n    y = Math.max(-MAX_Y, Math.min(MAX_Y, y))\n\n    this._cursor.x = x\n    this._cursor.y = y\n\n    this.updateCameraPosition()\n  }\n\n  getRotationMatrix() : [number, number, number, number] {\n    return [\n      Math.cos(this._rotation), -Math.sin(this._rotation),\n      Math.sin(this._rotation), Math.cos(this._rotation),\n    ]\n  }\n\n  set rotation(angle : number) {\n    this._rotation = constrainRad(angle)\n    this.updateCameraPosition()\n  }\n\n  get rotation() : number {\n    return this._rotation\n  }\n\n  rotateLeft() : void {\n    if (this._isAnimating) return\n    let angle = snapTo(constrainRad(this._rotation - Math.PI/2), ROTATION_SNAP_POSITIONS)\n    angle = this._rotation - Math.PI/2 < 0 ? angle - Math.PI * 2 : angle\n    animateValue(this._rotation, angle, 800, undefined, (v, done) => {\n      this.rotation = v\n      this._isAnimating = !done\n    })\n  }\n\n  rotateRight() : void {\n    if (this._isAnimating) return\n    let angle = snapTo(constrainRad(this._rotation + Math.PI/2), ROTATION_SNAP_POSITIONS)\n    angle = this._rotation + Math.PI/2 > Math.PI * 2 ? Math.PI * 2 + angle : angle\n    animateValue(this._rotation, angle, 800, undefined, (v, done) => {\n      this.rotation = v\n      this._isAnimating = !done\n    })\n  }\n\n  set zoom(zoom: number) {\n    this._zoom= Math.max( MIN_ZOOM, Math.min(MAX_ZOOM, zoom))\n    this.updateCameraFrame()\n  }\n\n  get zoom() : number {\n    return this._zoom\n  }\n}\n\nexport { OrthographicCamera}","import _ from 'lodash'\nimport { FixedTiles, TileType } from './assets'\n\ntype GridCell = {\n  position : [number, number]\n  fixedTile : TileType | null\n  rotation? : number\n}\n\ntype Grid = {\n  cells: GridCell[],\n  size: [number, number]\n}\n\n\nfunction createTree(index : number, cells: GridCell[]) : void {\n  cells[index] = { ...cells[index],\n    fixedTile : Math.random() > 0.5 ? FixedTiles.trees1 : FixedTiles.trees2,\n    rotation : _.sample([0, Math.PI / 2, Math.PI , Math.PI * 3/2])\n  }\n}\n\nfunction createLighttower(index : number, cells: GridCell[]) : void {\n  cells[index] = {...cells[index], \n    fixedTile : FixedTiles.lighttower, \n    rotation : Math.PI \n  }\n}\n\nfunction createAlley(index: number, cells: GridCell[]) : void {\n  cells[index] = {...cells[index],\n    fixedTile: _.sample([FixedTiles.alley1, FixedTiles.alley2]) || null,\n    rotation: Math.random() > 0.5 ? 0 : Math.PI\n  }\n}\n\nconst createGrid = function(sizeX: number, sizeY = 0) : Grid {\n  sizeY = sizeY == 0 ? sizeX : sizeY\n  const cells : GridCell[] = []\n  for (const i of _.range(sizeX)) {\n    for (const j of _.range(sizeY)) {\n      cells.push({ position: [i / (sizeX-1),j / (sizeY-1)], fixedTile : null})\n    }\n  }\n\n  // create trees\n  createTree(7+6*sizeY, cells)\n  createTree(7+5*sizeY, cells)\n  createTree(7+4*sizeY, cells)\n  createTree(7+3*sizeY, cells)\n  createTree(7+2*sizeY, cells)\n  createTree(7+1*sizeY, cells)\n\n  // add light towers\n  createLighttower(7 + 7*sizeX, cells)\n  createLighttower(7 + 0*sizeX, cells)\n\n  // create alley\n  for (const i of _.range(sizeX)) {\n    createAlley(0+i*sizeX, cells)\n  }\n  \n  return {\n    cells: cells,\n    size: [sizeX, sizeY ]\n  }\n}\n\nconst createRiverGrid = function(sizeX: number, sizeY = 0) : Grid {\n  const grid = createGrid(sizeX, sizeY)\n  const ox = Math.floor(sizeX/2) - 1\n  const oy = Math.floor(sizeY || sizeX /2) - 1\n  grid.cells[(ox - 2) * sizeX + oy + 1].fixedTile = FixedTiles.empty\n  grid.cells[(ox - 2) * sizeX + oy + 0].fixedTile = FixedTiles.empty\n  grid.cells[(ox - 1) * sizeX + oy + 1].fixedTile = FixedTiles.empty\n  grid.cells[(ox - 1) * sizeX + oy + 0].fixedTile = FixedTiles.empty\n  grid.cells[(ox + 0) * sizeX + oy + 0].fixedTile = FixedTiles.empty\n  grid.cells[(ox + 0) * sizeX + oy + 1].fixedTile = FixedTiles.empty\n  grid.cells[(ox + 1) * sizeX + oy + 1].fixedTile = FixedTiles.river\n  grid.cells[(ox + 1) * sizeX + oy + 1].rotation = 0\n  grid.cells[(ox + 1) * sizeX + oy + 0].fixedTile = FixedTiles.empty\n  grid.cells[(ox + 2) * sizeX + oy + 0].fixedTile = FixedTiles.empty\n  grid.cells[(ox + 3) * sizeX + oy + 0].fixedTile = FixedTiles.empty\n  return grid\n}\n\nconst createPlanscheGrid = function(sizeX: number, sizeY = 0) : Grid {\n  const grid = createGrid(sizeX, sizeY)\n  const ox = Math.floor(sizeX/2) - 2\n  const oy = Math.floor(sizeY || sizeX /2) - 2\n  grid.cells[(ox + 0) * sizeX + oy + 0].fixedTile = FixedTiles.empty\n  grid.cells[(ox + 0) * sizeX + oy + 1].fixedTile = FixedTiles.empty\n  grid.cells[(ox + 0) * sizeX + oy + 2].fixedTile = FixedTiles.empty\n  grid.cells[(ox + 1) * sizeX + oy + 0].fixedTile = FixedTiles.empty\n  grid.cells[(ox + 1) * sizeX + oy + 1].fixedTile = FixedTiles.pool\n  grid.cells[(ox + 1) * sizeX + oy + 2].fixedTile = FixedTiles.empty\n  grid.cells[(ox + 2) * sizeX + oy + 0].fixedTile = FixedTiles.empty\n  grid.cells[(ox + 2) * sizeX + oy + 1].fixedTile = FixedTiles.empty\n  grid.cells[(ox + 2) * sizeX + oy + 2].fixedTile = FixedTiles.empty\n  return grid\n}\n\nexport { createGrid, createRiverGrid, createPlanscheGrid }\nexport type { Grid }","import React, { useEffect, useRef, useState } from 'react'\nimport { merge, of } from 'rxjs'\nimport { Playground, PlaygroundSettings } from '../babylon/playground'\nimport { Actions, Avatar, calculateNumberOfSelectedTiles, Statemachine } from '../state'\nimport { TileMenu } from './TileMenu'\nimport { useHistory } from 'react-router'\nimport { delay } from 'rxjs/internal/operators/delay'\nimport { TileType } from '../babylon/assets'\nimport { LoadingView } from './LoadingView'\n\nimport './PlaygroundView.scss'\n\nimport nextIcon from '../assets/images/next.png'\nimport backIcon from '../assets/images/previous.png'\nimport rotateRightIcon from '../assets/images/rotate_right.png'\nimport rotateLeftIcon from '../assets/images/rotate_left.png'\n\nimport explorerImage from '../assets/images/explorer.png'\nimport builderImage from '../assets/images/builder.png'\nimport kidsImage from '../assets/images/two_kids.png'\nimport { HintView } from './HintView'\n\n\nenum LoadedState {\n  LOADING,\n  LOADED,\n  STARTED\n}\n\nfunction getAvatarImage(avatar? : Avatar) : string|undefined {\n  switch (avatar) {\n  case 'explorer':\n    return explorerImage\n  case 'builder':\n    return builderImage\n  case 'social':\n    return kidsImage\n  }\n  return undefined\n}\n\nconst PlaygroundView = function({ stateMachine, settings } : { stateMachine: Statemachine, settings: PlaygroundSettings }) : React.ReactElement {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const [playground, setPlayground] = useState<Playground>()\n  const [loaded, setLoaded] = useState(LoadedState.LOADING)\n  const [finished, setFinished] = useState(false)\n  const [showHelp, setShowHelp] = useState(true)\n\n  const [seed] = useState(stateMachine.state.seed)\n\n  const [selectedTile, setSelectedTile] = useState<number>()\n  const [numberOfSelectedTiles, setNumberOfSelectedTiles] = useState(0)\n\n  const [avatar] = useState(getAvatarImage(stateMachine.state.avatar))\n\n  const history = useHistory()\n\n  // setup scene\n  useEffect(() => {\n    if (!canvasRef || canvasRef.current == null)\n      return\n    // disable context menu\n    canvasRef.current.oncontextmenu = function(e) { e.preventDefault(); e.stopPropagation() }\n\n    const playground = new Playground({ canvas: canvasRef.current, settings: settings, stateMachine: stateMachine })\n    playground.init(stateMachine.state.playgroundType, () => setLoaded(LoadedState.LOADED))\n    setPlayground(playground)\n    \n    return () => {\n      playground.dispose()\n      setPlayground(undefined)\n    }\n  },[canvasRef])\n\n  //handle resize\n  useEffect(() => {\n    function onResize() {\n      playground?.resize()\n    }\n    window.addEventListener('resize', onResize)\n    return () => {\n      playground?.dispose()\n      window.removeEventListener('resize', onResize)\n    }\n  },[playground])\n\n  // subscribe to state changes\n  useEffect(() => {\n    const sub = merge(of(stateMachine.state),stateMachine).pipe(delay(150)).subscribe( (state) => {\n      setSelectedTile(undefined)\n      if (state.selectedTile) {\n        setSelectedTile(state.selectedTile)\n      }\n      setNumberOfSelectedTiles(calculateNumberOfSelectedTiles(state))\n    })\n    return () => sub.unsubscribe()\n  },[])\n\n  //handle finish click\n  useEffect(() => {\n    if (playground) {\n      playground.enablePointerEvents = !finished\n    }\n    if (finished) {\n      stateMachine?.trigger(Actions.selectTile, { id: undefined })\n    }\n  },[finished, playground])\n\n  useEffect(() => {\n    if (playground && loaded == LoadedState.STARTED)\n      playground.enable = true\n  }, [loaded])\n\n  //tile type selection handler\n  function onSelectTyleType(type: TileType | undefined) {\n    if (type)\n      stateMachine?.trigger(Actions.setTileType, { type: type })\n    stateMachine?.trigger(Actions.selectTile, { id: undefined })\n  }\n\n  function onScreenShotButtonClicked() {\n    playground?.takeScreenshot() \n  }\n\n  function onFinished() {\n    history.push('/missing-tile')\n  }\n\n  function raiseZoom() {\n    if (playground)\n      playground.camera.zoom -= 1\n  }\n\n  function lowerZoom() {\n    if (playground)\n      playground.camera.zoom += 1\n  }\n\n  function rotateLeft() {\n    playground?.camera.rotateLeft()\n  }\n\n  function rotateRight() {\n    playground?.camera.rotateRight()\n  }\n\n  return (\n    <div className='playground-view'>\n      <canvas ref={canvasRef} id='renderCanvas' touch-action='none' onSelectCapture={(e) => e.preventDefault()}></canvas>\n      { loaded != LoadedState.STARTED ?\n        <LoadingView \n          avatar={avatar}\n          loaded={loaded != LoadedState.LOADING} \n          onStartClicked={() => setLoaded(LoadedState.STARTED)} />\n        :\n        <div>\n          { !finished && \n            <div className=\"top-buttons\">\n              <button className=\"help-button\" onClick={() => setShowHelp(true)}>?</button>\n              <div className=\"top-right\">\n                <button onClick={() => setFinished(true)}>Fertig</button>\n                <TileCounter count={numberOfSelectedTiles} maximum={settings.selectableTiles}/>\n              </div> \n            </div>\n          }\n          <div className=\"bottom-buttons\">\n            { !finished ? \n              <div className=\"center-menu\">\n                <button className=\"button-zoom\" onClick={rotateLeft}><img src={rotateLeftIcon}/></button>\n                <div className=\"avatar-icon\">\n                  <img src={avatar}/>\n                </div>\n                <button className=\"button-zoom\" onClick={rotateRight}><img src={rotateRightIcon}/></button>\n              </div>\n              : \n              <div className=\"space-between\">\n                <button onClick={() => setFinished(false)}><img src={backIcon}/>Zurück</button>\n                {/* <button onClick={() => onScreenShotButtonClicked()}>Foto</button> */}\n                <button onClick={() => onFinished()} className=\"right glow\">Weiter<img src={nextIcon}></img></button>\n              </div>\n            }\n          </div>\n          { selectedTile != undefined &&\n            <TileMenu\n              tileState={stateMachine?.state.tiles[selectedTile]}\n              numberOfSelectedTiles={numberOfSelectedTiles}\n              maximumSelectedTies={settings.selectableTiles}\n              onSelect={onSelectTyleType} \n              seed={seed}\n            /> \n          }\n          \n        </div>\n      }\n      { showHelp && \n        <HintView \n          avatar={avatar || ''} \n          onClose={loaded == LoadedState.STARTED ? (() => setShowHelp(false)) : undefined} \n          startHint={loaded == LoadedState.STARTED ? 1 : 0}/> \n      }\n    </div>\n  )\n}\n\nimport tileIcon from './../assets/images/icon_tile_grass.png'\n\nconst TileCounter = function({ count, maximum} : { count: number, maximum: number}) : React.ReactElement {\n  return(\n    <div className=\"tile-counter\">\n      <img src={tileIcon}/>\n      <span>{count}/{maximum}</span>\n    </div>\n  )\n}\n\nexport { PlaygroundView }\n","import { BaseParticleSystem, Color3, Color4, GPUParticleSystem, PointLight, Scene, Texture, Vector3 } from '@babylonjs/core'\nimport { ParticleSystem } from '@babylonjs/core/Particles/particleSystem'\n\ninterface PlaygroundEffect {\n  dispose() : void\n}\n\nclass Smoke implements PlaygroundEffect {\n\n  particleSystem : ParticleSystem | undefined\n\n  constructor(name: string, texture: Texture, scene: Scene) {\n    if (!GPUParticleSystem.IsSupported)\n      return\n\n    this.particleSystem = new ParticleSystem(name + Math.random(), 300, scene)\n  \n\n    this.particleSystem.particleTexture = texture\n\n    this.particleSystem.createSphereEmitter(0.1)\n\n    this.particleSystem.color1 = new Color4(0.0, 0.0, 0.0, 1.0)\n    this.particleSystem.color2 = new Color4(0.0, 0.0, 0.0, 1.0)\n    this.particleSystem.colorDead = new Color4(1, 1, 1, 0.0)\n\n    this.particleSystem.minSize = 0.05\n    this.particleSystem.maxSize = 0.3\n\n    // Life time of each particle (random between...\n    this.particleSystem.minLifeTime = 0.1\n    this.particleSystem.maxLifeTime = 0.5\n\n    // Emission rate\n    this.particleSystem.emitRate = 1000\n\n    // Speed\n    this.particleSystem.minEmitPower = 0.5\n    this.particleSystem.maxEmitPower = 3\n    this.particleSystem.updateSpeed = 0.01\n\n\n    this.particleSystem.targetStopDuration = 0.1\n    // this.particleSystem.disposeOnStop = true\n\n  }\n\n  dispose() : void {\n    this.particleSystem?.dispose()\n  }\n\n  run(positon: Vector3) : void {\n    if (this.particleSystem) {\n      this.particleSystem.emitter = positon\n      this.particleSystem.reset()\n      this.particleSystem.start()\n    }\n  }\n\n}\n\nclass Fountain implements PlaygroundEffect {\n\n  // parent : Node\n  particleSystem : BaseParticleSystem\n\n  constructor(position: Vector3, texture: Texture, scene: Scene) {\n    \n    const isGpuSystem = GPUParticleSystem.IsSupported\n\n    if (isGpuSystem) {\n      const gpuSystem = new GPUParticleSystem('particles', { capacity: 500 }, scene)\n      gpuSystem.activeParticleCount = 1000\n      gpuSystem.start()\n      this.particleSystem = gpuSystem\n    } else {\n      const cpuSystem = new ParticleSystem('fountain', 300, scene)\n      cpuSystem.start()\n      this.particleSystem = cpuSystem\n    }\n\n    this.particleSystem.particleTexture = texture\n\n    this.particleSystem.emitter = position\n    this.particleSystem.createPointEmitter(new Vector3(-1, 10, -1), new Vector3(1, 10, 1))\n\n    this.particleSystem.color1 = new Color4(0.7, 0.8, 1.0, 1.0)\n    this.particleSystem.color2 = new Color4(0.2, 0.5, 1.0, 1.0)\n    this.particleSystem.colorDead = new Color4(1, 1, 1, 0.0)\n\n    this.particleSystem.minSize = 0.01\n    this.particleSystem.maxSize = isGpuSystem ? 0.1 : 0.2\n\n    // Life time of each particle (random between...\n    this.particleSystem.minLifeTime = 0.6\n    this.particleSystem.maxLifeTime = 0.9\n\n    // Emission rate\n    this.particleSystem.emitRate = isGpuSystem ? 300 : 100\n    this.particleSystem.gravity = new Vector3(0, -9.81, 0)\n\n    this.particleSystem.minAngularSpeed = 0\n    this.particleSystem.maxAngularSpeed = Math.PI * 0.2\n\n    // Speed\n    this.particleSystem.minEmitPower = 0.2\n    this.particleSystem.maxEmitPower = 0.5\n    this.particleSystem.updateSpeed = 0.005\n\n    // Start the particle system\n    // this.particleSystem.start()\n  }\n\n  dispose() : void {\n    if (this.particleSystem instanceof ParticleSystem || this.particleSystem instanceof GPUParticleSystem)\n      this.particleSystem.dispose()\n  }\n}\n\nclass WaterLight implements PlaygroundEffect {\n\n  light: PointLight\n\n  constructor(position: Vector3, scene: Scene) {\n    this.light = new PointLight('pointLight', position, scene)\n    this.light.intensity = 5\n    this.light.range = 30\n    this.light.diffuse = new Color3(0,1.0,1.0)\n  }\n\n  dispose() : void {\n    this.light.dispose()\n  }\n}\n\nexport { Fountain, WaterLight, Smoke }\nexport type { PlaygroundEffect }","import { Animation } from '@babylonjs/core'\nimport { AnimationGroup } from '@babylonjs/core/Animations/animationGroup'\nimport { Vector3 } from '@babylonjs/core/Maths/math'\nimport { Mesh } from '@babylonjs/core/Meshes/mesh'\nimport { TransformNode } from '@babylonjs/core/Meshes/transformNode'\nimport { Scene } from '@babylonjs/core/scene'\nimport { FixedTiles, SelectableTiles, TextureArray, TileMeshArray, TileType } from './assets'\nimport { Fountain, PlaygroundEffect, WaterLight } from './effects'\n\ntype TileState = {\n  type: TileType,\n  rotation: number,\n  index: number\n}\n\nclass Tile {\n  node: TransformNode\n  name: string\n  \n  private _position: Vector3\n\n  private _type: TileType | undefined\n\n  private _meshes : TileMeshArray\n  private _textures : TextureArray\n\n  private _scene : Scene\n\n  private _effects : PlaygroundEffect[] = []\n\n  private _animation : AnimationGroup | undefined;\n  private _enterAnimation : Animation | undefined;\n  private _isEntering = false\n\n  constructor(name: string, meshes: TileMeshArray, textures: TextureArray, scene: Scene, enterAnimation?: Animation) {\n    this.name = name\n    this._meshes = meshes\n    this._textures = textures\n    this._scene = scene\n\n    this._enterAnimation = enterAnimation\n\n    this._position = new Vector3(0,0,0)\n\n    this.node = new TransformNode(name, scene, true)\n  }\n\n  dispose() : void {\n    this.node?.dispose()\n    this._effects.forEach((e) => e.dispose())\n    this._effects = []\n    this._animation?.dispose()\n  }\n\n  get type() : TileType {\n    return this._type || FixedTiles.empty\n  }\n\n  set type(type : TileType) {\n    if (this._type == type)\n      return\n    this._type = type\n     \n    // remove old mesh and effects\n    this.dispose()\n\n    // add effects depending on tiles\n    if (type == FixedTiles.pool ) {\n      this._effects.push(new Fountain(this.node.getAbsolutePosition().add(new Vector3(0.01, 1.1, 0.01)), this._textures['texture-fountain'], this._scene))\n      this._effects.push(new WaterLight(this.node.getAbsolutePosition().add(new Vector3(0, 2, 0)), this._scene))\n    } else if ( type == FixedTiles.river ) {\n      this._effects.push(new WaterLight(this.node.getAbsolutePosition().add(new Vector3(-1, 2.5, -0.5)), this._scene))\n      this._effects.push(new WaterLight(this.node.getAbsolutePosition().add(new Vector3(1, 3.0, -1)), this._scene))\n      this._effects.push(new WaterLight(this.node.getAbsolutePosition().add(new Vector3(-2, 1.5, -1)), this._scene))\n    }\n\n    // instanciate new mesh keeping the same name\n    const mesh = <Mesh>this._meshes[type]?.mesh?.instantiateHierarchy(undefined, undefined, (src, clone) => {\n      clone.name = src.name\n    })\n\n    // attach animations to target nodes\n    this._meshes[type]?.animations?.forEach(({anim, target, fixedSpeed}) => {\n      this._animation = new AnimationGroup(this.name, this._scene)\n      const targetNode = mesh.getChildren(undefined, false).find((node) => {\n        return node.name == target\n      })\n      if (targetNode) {\n        this._animation.addTargetedAnimation(anim, targetNode)\n        const speed = fixedSpeed ? undefined : Math.random() * 0.5 + 0.5\n        this._animation.start(true, speed)\n      }\n    })\n    // performance optimization\n    if (mesh) mesh.doNotSyncBoundingInfo = true\n\n    // animation to slide in\n    if (mesh && this._enterAnimation) {\n      this._isEntering= true\n      this._scene.beginDirectAnimation(this.node, [this._enterAnimation], 0, 8, false, 1, () => {\n        this._isEntering = false\n      })\n    }\n\n    this.node = mesh || new TransformNode(this.name, this._scene)\n   \n    this.node.position = this._position\n    this.node.setEnabled(true)\n  }\n\n  get isEntering() : boolean {\n    return this._isEntering\n  }\n\n  get rotation() : number {\n    return this.node.rotation.y \n  }\n\n  set rotation(rotation: number) {\n    this.node.rotate(new Vector3(0,1,0), rotation)\n  }\n\n  set position(position: Vector3) {\n    this._position = position\n    if (this.node)\n      this.node.position = this._position\n  }\n\n  get position() : Vector3 {\n    return this._position\n  }\n\n  get selectable() : boolean {\n    return Object.keys(SelectableTiles).includes(this._type as string)\n  }\n\n  show() : void {\n    this.node.setEnabled(true)\n  }\n\n  hide() : void {\n    this.node.setEnabled(false)\n  }\n}\n\nexport { Tile }\nexport type { TileMeshArray, TextureArray, TileState }","import { Mesh, Animation, Scene, MeshBuilder, Vector3, StandardMaterial, Color3, UtilityLayerRenderer, HemisphericLight, PointerEventTypes, PointerInfo } from '@babylonjs/core'\nimport { IAnimationKey } from '@babylonjs/core/Animations/animationKey'\nimport { Engine } from '@babylonjs/core/Engines/engine'\nimport EventEmitter from 'events'\nimport _ from 'lodash'\nimport { Subject } from 'rxjs'\nimport { map, takeUntil, withLatestFrom } from 'rxjs/operators'\nimport { SelectableTiles } from './assets'\nimport { Grid } from './grid'\nimport { TextureArray, Tile, TileMeshArray, TileState } from './tiles'\nimport { easeInOut } from './utils'\n\nclass TileCursor {\n\n  private _selectLayer : UtilityLayerRenderer\n  private _selectMarker : Mesh\n\n  constructor(utilLayer: UtilityLayerRenderer) {\n    this._selectLayer = utilLayer\n    this._selectMarker = MeshBuilder.CreateBox('marker-mesh', { width: 1.1, height: 0.01, depth: 1.1 }, this._selectLayer.utilityLayerScene)\n\n    const material = new StandardMaterial('tileMaterial', this._selectLayer.utilityLayerScene)\n    material.diffuseColor = new Color3(0.5, 0.5, 0.5)\n    material.specularColor = new Color3(0.5, 0.5, 0.5)\n    material.alpha = 0.99\n    material.alphaMode = Engine.ALPHA_MAXIMIZED\n    this._selectMarker.material = material\n    this._selectLayer.shouldRender = true\n\n    this._selectMarker.setEnabled(false)\n    this._selectMarker.isPickable = false\n    this._selectMarker.translate(new Vector3(0,1,0), 0.73)\n    this._selectMarker.bakeCurrentTransformIntoVertices()\n\n  }\n\n  set enable(enable : boolean) {\n    this._selectMarker.setEnabled(enable)\n  }\n\n  set position(pos: Vector3) {\n    this._selectMarker.position = pos\n  }\n}\n\nclass TileManager extends EventEmitter {\n\n  tiles: Tile[]\n  scene: Scene\n  grid: Grid\n\n  private _selectLayer : UtilityLayerRenderer\n  private _cursor : TileCursor\n\n  private _assets : { meshes: TileMeshArray, textures: TextureArray }\n\n  //Observables\n  $pointerDownObservable : Subject<PointerInfo>\n  $pointerUpObservable : Subject<PointerInfo>\n  $disposeObservable: Subject<void>\n\n  constructor(scene: Scene, grid: Grid) {\n    super()\n    this.grid = grid\n    this.scene = scene\n    this.tiles = []\n\n    this._assets = { meshes: {}, textures: {}}\n\n    this.$pointerDownObservable = new Subject()\n    this.$pointerUpObservable = new Subject()\n    this.$disposeObservable = new Subject()\n\n    this._selectLayer = new UtilityLayerRenderer(scene, false)\n    new HemisphericLight('light1', new Vector3(0, 0, 1), this._selectLayer.utilityLayerScene)\n    this._cursor = new TileCursor(this._selectLayer)\n    \n    this.setupPointerObservables()\n\n  }\n\n  dispose() : void {\n    this.$disposeObservable.next()\n  }\n\n  set meshes(meshes: TileMeshArray ) {\n    this._assets.meshes = meshes\n  }\n\n  set textures(textures: TextureArray) {\n    this._assets.textures = textures\n  }\n\n  setupPointerObservables() : void {\n\n    // add pointer observables for tile picking\n    this.scene.onPointerObservable.add( (pInfo) => {\n      if (pInfo.type == PointerEventTypes.POINTERDOWN)\n        this.$pointerDownObservable.next(pInfo)\n      else if (pInfo.type == PointerEventTypes.POINTERUP)\n        this.$pointerUpObservable.next(pInfo)\n    })\n\n    const $onDownPicked = this.$pointerDownObservable.pipe(map((pInfo) => {\n      const pick = this._selectLayer.utilityLayerScene.pick(pInfo.event.offsetX, pInfo.event.offsetY)\n      return ({ pick: pick, event: pInfo.event, time: Date.now()})\n    }))\n\n    const $onUpPicked = this.$pointerUpObservable.pipe(map((pInfo) => {\n      const pick = this._selectLayer.utilityLayerScene.pick(pInfo.event.offsetX, pInfo.event.offsetY)\n      return ({ pick: pick, event: pInfo.event, time: Date.now()})\n    }))\n\n    // test if tile on down event is the same than on up event\n    $onUpPicked.pipe(withLatestFrom($onDownPicked), takeUntil(this.$disposeObservable)).subscribe( ([up, down]) => {\n      const dist = Math.abs(up.event.screenX - down.event.screenX) + Math.abs(up.event.screenY - down.event.screenY)\n      if (up.pick?.hit && up.pick?.pickedMesh?.name == down.pick?.pickedMesh?.name && dist < 10) {\n        this.emit('tile-selected', up.pick.pickedMesh?.metadata?.tileIndex)\n      }\n    })\n  }\n\n  setup(width: number, height: number) : void {\n    // create slide in animation\n    const ySlideAnimation : Animation = new Animation('enter-animation', 'position.y',10, Animation.ANIMATIONTYPE_FLOAT, Animation.ANIMATIONLOOPMODE_CONSTANT )\n    ySlideAnimation.setKeys(_.range(8).map<IAnimationKey>( (i) => { \n      return { frame: i, value:  easeInOut(i/8) - 1 } \n    }))\n\n    // create tiles\n    this.tiles = this.grid.cells.map(({position, fixedTile, rotation}, i) => {\n      const tile = new Tile(`tile${i}`, this._assets.meshes, this._assets.textures, this.scene, ySlideAnimation)\n      \n      tile.position = new Vector3(position[0] * width - width/2,  0, position[1] * height - height/2)\n      tile.type = fixedTile || SelectableTiles.grass\n      tile.rotation = rotation || 0\n      tile.show()\n      this.emit('tile-setup', { id: i, type: tile.type, rotation: tile.rotation})\n      return tile\n    })\n\n    // create hitboxes to select tiles\n    this.grid.cells.forEach(({position, fixedTile}, i) => {\n      if (fixedTile)\n        return\n\n      const box = MeshBuilder.CreateBox(`select_tile_${i}`, { width: 1, height:0.01, depth:1 }, this._selectLayer.utilityLayerScene)\n      box.metadata = { tileIndex : i, selectable: fixedTile == null }\n      box.position = new Vector3(\n        position[0] * width - width/2, \n        0.8,\n        position[1] * height - height/2\n      )\n      box.visibility = 0\n      box.isPickable = true\n    })\n  }\n\n  handleTileChange(currState: TileState[], prevState? : TileState[]) : void {\n    const updatedTiles = prevState ? _.differenceWith(prevState, currState, _.isEqual) : currState\n    updatedTiles.forEach((tileState) => {\n      const tile = this.tiles[tileState.index]\n      if (tile && tile.selectable) {\n        tile.type = tileState.type\n        tile.rotation = tileState.rotation\n      }\n    })\n  }\n\n  setSelectMarker(tileIndex: number | undefined) : void {\n    if (tileIndex != undefined && this.tiles[tileIndex] != undefined) {\n      this._cursor.position = this.tiles[tileIndex].position\n      this._cursor.enable = true\n    } else {\n      this._cursor.enable = false\n    }\n  }\n}\n\nexport { TileManager }","import * as BABYLON from '@babylonjs/core'\nimport SimplexNoise from 'simplex-noise'\nimport { distinctUntilChanged, map, pairwise, takeUntil } from 'rxjs/operators'\nimport { Subject } from 'rxjs'\nimport { from as fromPromise } from 'rxjs'\n\nimport '@babylonjs/loaders'\n\nimport { OrthographicCamera } from './camera'\nimport { setupLights } from './light'\nimport { createPlanscheGrid, createRiverGrid } from './grid'\nimport { loadAssets } from './assets'\nimport { optimizePerformance, showGroundPlane } from './helpers'\nimport { Actions, PlayGroundType, Statemachine } from '../state'\nimport { TileManager } from './tileManager'\n\n// import '@babylonjs/inspector'\n\ntype PlaygroundSettings = {\n  gridSize: number\n  width: number\n  height: number\n  camera: {\n    zoom: number\n  },\n  version: string,\n  selectableTiles: number\n}\n\nclass Playground {\n\n  canvas: HTMLCanvasElement\n  engine: BABYLON.Engine \n  scene: BABYLON.Scene\n  settings : PlaygroundSettings\n  camera: OrthographicCamera\n\n  textures : BABYLON.Texture[]\n\n  stateMachine: Statemachine\n\n  enablePointerEvents: boolean\n  enable : boolean\n\n  $disposeObservable : Subject<void>\n\n  constructor({ canvas, settings, stateMachine } : { canvas: HTMLCanvasElement, settings: PlaygroundSettings, stateMachine: Statemachine } ) {\n    this.canvas = canvas\n    this.engine = new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true })\n    this.scene = new BABYLON.Scene(this.engine,{})\n    this.stateMachine = stateMachine\n    this.settings = settings\n    this.enablePointerEvents = true\n\n    // start disabled\n    this.enable = false\n\n    this.$disposeObservable = new Subject()\n\n    this.textures = []\n\n    this.camera = new OrthographicCamera(this.scene, this.canvas, this.settings.camera.zoom)\n\n    // ignore pointer events when disabled\n    this.scene.onPrePointerObservable.add((pointerInfo) => {\n      pointerInfo.skipOnPointerObservable = !this.enablePointerEvents\n    })\n\n  }\n\n  dispose() : void {\n    this.$disposeObservable.next()\n    this.engine.stopRenderLoop()\n    this.engine.dispose()\n    // this.scene.dispose()\n  }\n\n  init(playGroundType: PlayGroundType, onLoaded: () => void) : void {\n    \n    const grid = (playGroundType == 'pool') ? createPlanscheGrid(this.settings.gridSize) : createRiverGrid(this.settings.gridSize)\n  \n    // setup tiles\n    const tileManager = new TileManager(this.scene, grid)\n\n    // register select events\n    tileManager.on('tile-selected', (id) => this.stateMachine.trigger(Actions.selectTile, { id: id }) )\n\n    // register tile setup events\n    tileManager.on('tile-setup', (args) => { this.stateMachine.trigger(Actions.setupTile, args) })\n\n    // sync change in tiles states with meshes\n    this.stateMachine\n      .pipe(pairwise(), takeUntil(this.$disposeObservable))\n      .subscribe(([curr, prev]) => {\n        tileManager.handleTileChange(curr.tiles, prev.tiles)\n      })\n    \n    // set select cursor for tiles\n    this.stateMachine\n      .pipe(map((state) => state.selectedTile), distinctUntilChanged(), takeUntil(this.$disposeObservable))\n      .subscribe((selectedTile) => {\n        this.camera.enableControl = selectedTile == undefined\n        tileManager.setSelectMarker(selectedTile)\n      })\n\n    // load assets\n    fromPromise(loadAssets(this.scene, playGroundType))\n      .pipe(takeUntil(this.$disposeObservable))\n      .subscribe(({tileMeshes, textures}) => {\n        tileManager.meshes = tileMeshes\n        tileManager.textures = textures\n\n        // setup tiles\n        tileManager.setup(this.settings.width, this.settings.height)\n\n        // update tiles from current state\n        tileManager.handleTileChange(this.stateMachine.state.tiles)\n\n        optimizePerformance(this.scene)\n        this.camera.attachControl()\n        onLoaded()\n      })\n\n  \n    // show axis\n    // showAxis(5,this.scene)\n\n    setupLights(this.scene)\n    \n\n    //createSkyBox(this.scene)\n    showGroundPlane(45, this.scene)\n    // createSkyDome(this.scene)\n\n    // const fpsText = setupFpsDisplay()\n\n    // applyPostProccessing(this.scene, this.engine, this.camera.camera)\n\n    // call loop function\n    const startTime = Date.now()\n    this.scene.onBeforeRenderObservable.add(() => { loop(Date.now() - startTime) })\n\n    const simplex = new SimplexNoise()\n    // let lastUpdate = 0\n    const loop = (time: number) => {\n\n      // only update every 200 ms\n      // if (time - lastUpdate > 200) {\n      //   fpsText.text = 'fps: ' + Math.floor(this.engine.getFps())\n      //   lastUpdate = time\n      // }\n      \n      //animate tile movement\n      tileManager.tiles.forEach((tile,i) => {\n        if (!tile.isEntering)\n          tile.position.y = simplex.noise2D(i,time * 0.0001) * 0.05\n      })\n    }\n\n    // start render loop\n    this.engine.runRenderLoop(() => {\n      if (this.enable)\n        this.scene.render()\n    })\n\n    // cleanup when scene is disposes\n    this.scene.onDisposeObservable.add(() => {\n      tileManager.dispose()\n    })\n  }\n  takeScreenshot() : void {\n    if (this.camera) {\n      this.scene.render()\n      const size = { height: this.canvas.height*2, width: this.canvas.width*2}\n      BABYLON.Tools.CreateScreenshotUsingRenderTarget(this.engine, this.camera.camera, size)\n    }\n  }\n\n  resize() : void {\n    this.camera.onResize()\n    this.engine.resize()\n  }\n\n  enableMouse(enable: boolean) : void {\n    this.enablePointerEvents = enable\n    this.camera.enableControl = enable\n  }\n}\n\nexport { Playground }\nexport type { PlaygroundSettings }\n\n","import { Color3, DynamicTexture, Mesh, MeshBuilder, Node, Scene, StandardMaterial, Vector3 } from '@babylonjs/core'\nimport { Texture } from '@babylonjs/core/Materials/Textures/texture'\nimport { AdvancedDynamicTexture } from '@babylonjs/gui/2D/advancedDynamicTexture'\nimport { Control } from '@babylonjs/gui/2D/controls/control'\nimport { StackPanel } from '@babylonjs/gui/2D/controls/stackPanel'\nimport { TextBlock } from '@babylonjs/gui/2D/controls/textBlock'\nimport { SkyMaterial } from '@babylonjs/materials'\nimport { GradientMaterial } from '@babylonjs/materials/gradient/gradientMaterial'\nimport { GridMaterial } from '@babylonjs/materials/grid/gridMaterial'\n\nconst showAxis = function(size : number, scene : Scene) : void {\n\n  const makeTextPlane = function(text : string, color : string, size : number) {\n    const dynamicTexture = new DynamicTexture('DynamicTexture', 50, scene, true)\n    dynamicTexture.hasAlpha = true\n    dynamicTexture.drawText(text, 5, 40, 'bold 36px Arial', color , 'transparent', true)\n    const plane = Mesh.CreatePlane('TextPlane', size, scene, true)\n    plane.isPickable = false\n    const material = new StandardMaterial('TextPlaneMaterial', scene)\n    material.backFaceCulling = false\n    material.specularColor = new Color3(0, 0, 0)\n    material.diffuseTexture = dynamicTexture\n    plane.material = material\n    return plane\n  }\n\n  const axisX = Mesh.CreateLines('axisX', [ \n    Vector3.Zero(), new Vector3(size, 0, 0), new Vector3(size * 0.95, 0.05 * size, 0), \n    new Vector3(size, 0, 0), new Vector3(size * 0.95, -0.05 * size, 0)\n  ], scene)\n  axisX.color = new Color3(1, 0, 0)\n  axisX.isPickable = false\n  const xChar = makeTextPlane('X', 'red', size / 10)\n  xChar.position = new Vector3(0.9 * size, -0.05 * size, 0)\n  const axisY = Mesh.CreateLines('axisY', [\n    Vector3.Zero(), new Vector3(0, size, 0), new Vector3( -0.05 * size, size * 0.95, 0), \n    new Vector3(0, size, 0), new Vector3( 0.05 * size, size * 0.95, 0)\n  ], scene)\n  axisY.color = new Color3(0, 1, 0)\n  axisY.isPickable = false\n  const yChar = makeTextPlane('Y', 'green', size / 10)\n  yChar.position = new Vector3(0, 0.9 * size, -0.05 * size)\n  const axisZ = Mesh.CreateLines('axisZ', [\n    Vector3.Zero(), new Vector3(0, 0, size), new Vector3( 0 , -0.05 * size, size * 0.95),\n    new Vector3(0, 0, size), new Vector3( 0, 0.05 * size, size * 0.95)\n  ], scene)\n  axisZ.color = new Color3(0, 0, 1)\n  axisZ.isPickable = false\n  const zChar = makeTextPlane('Z', 'blue', size / 10)\n  zChar.position = new Vector3(0, 0.05 * size, 0.9 * size)\n}\n\nconst showGroundPlane = function(size: number, scene : Scene, yOffset = 0) : void {\n  \n  //create ground\n  const ground = MeshBuilder.CreateGround('ground', {width:size, height:size})\n  const groundMaterial = new StandardMaterial('ground',scene)\n  const texture = new Texture('assets/textures/ground.jpg', scene)\n  texture.uScale = texture.vScale = 30\n  groundMaterial.diffuseTexture = texture\n  groundMaterial.specularColor = new Color3(0, 0, 0)\n  ground.material = groundMaterial\n  ground.position.y = yOffset\n  scene.addMesh(ground)\n\n  //create Grid\n  const grid = MeshBuilder.CreateGround('ground', {width:size, height:size})\n  const gridMaterial = new GridMaterial('default', scene)\n  gridMaterial.majorUnitFrequency = 1\n  gridMaterial.minorUnitVisibility = 0\n  gridMaterial.gridRatio = 1.02\n  gridMaterial.backFaceCulling = false\n  gridMaterial.mainColor = new Color3(0, 0, 0)\n  gridMaterial.lineColor = new Color3(1.0, 1.0, 1.0)\n  gridMaterial.opacity = 0.1\n  grid.material = gridMaterial\n  grid.position.y = yOffset\n  scene.addMesh(grid)\n\n  // const material = new GradientMaterial('grad', scene)\n  // material. = Color3.Black() // Set the gradient top color\n  // material.bottomColor = Color3.White() // Set the gradient bottom color\n  // material.offset = 0.25\n\n  \n}\n\nconst createSkyBox = function(scene : Scene) : void  {  \n  const skybox = Mesh.CreateBox('skyBox', 100, scene, false, Mesh.BACKSIDE)\n  skybox.rotate(new Vector3(0,0,1), 180)\n  const skyMaterial = new SkyMaterial('skyMaterial', scene)\n  // skyMaterial.backFaceCulling = false\n  skybox.material = skyMaterial\n  // const skybox = MeshBuilder.CreateBox('skyBox', { size : 100.0 }, scene)\n  // const skyboxMaterial = new StandardMaterial('skyBox', scene)\n  // skyboxMaterial.backFaceCulling = false\n  // skyboxMaterial.reflectionTexture = new CubeTexture('assets/textures/sky3/skybox', scene)\n  // skyboxMaterial.reflectionTexture.coordinatesMode = Texture.SKYBOX_MODE\n  // skyboxMaterial.diffuseColor = new Color3(0, 0, 0)\n  // skyboxMaterial.specularColor = new Color3(0, 0, 0)\n  // skybox.material = skyboxMaterial\n  // skybox.position.y = 0\n}\n\nconst createSkyDome = function(scene: Scene) : GradientMaterial {\n  // const sphere = MeshBuilder.CreateBox('skyBox', { size : 1000.0 }, scene)\n  const sphere = MeshBuilder.CreateSphere('sphere', { segments: 32, diameter: 100 }, scene)\n  const gradientMaterial = new GradientMaterial('grad', scene)\n  gradientMaterial.backFaceCulling = false\n  // gradientMaterial.topColor = new Color3(0.3,0.3,0.3) // Set the gradient top color\n  // gradientMaterial.bottomColor = new Color3(0,0,0) // Set the gradient bottom color\n  gradientMaterial.topColor = new Color3(204/255, 102/255, 153/255)\n  gradientMaterial.bottomColor = new Color3(77/255, 25/255, 51/255)\n  gradientMaterial.offset = 0.5\n  gradientMaterial.smoothness = 0.01\n  sphere.material = gradientMaterial\n  return gradientMaterial\n}\n\nconst createFog = function(scene: Scene) : void {\n  //enable fog mode\n  scene.fogMode = Scene.FOGMODE_EXP\n  scene.fogColor = new Color3(102/255, 130/255, 93/255)\n  scene.fogDensity = 0.005\n}\n\nconst getNodeChildren = function(node: Node) : string[] {\n  const children = node.getChildren()\n  if (!children)\n    return []\n  \n  return children.reduce<string[]>((acc, child) => {\n    acc.push(child.name)\n    getNodeChildren(child).forEach((c) => acc.push(c))\n    return acc\n  },[])\n}\n\nconst setupFpsDisplay = function() : TextBlock {\n  const advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI('UI')\n  const stackPanel = new StackPanel()\n  stackPanel.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP\n  stackPanel.isVertical = true\n  advancedTexture.addControl(stackPanel)  \n\n  const text = new TextBlock()\n  text.text = '<fps>'\n  text.color = 'white'\n  text.fontSize = 16\n  text.height = '30px'\n  stackPanel.addControl(text)\n  return text\n}\n\nconst optimizePerformance = function(scene: Scene) : void {\n  scene.autoClear = true // Color buffer\n  scene.autoClearDepthAndStencil = false\n  scene.freeActiveMeshes()\n  scene.blockMaterialDirtyMechanism = true\n}\n\n\n\nexport { showAxis, showGroundPlane, getNodeChildren, createSkyBox, createSkyDome, createFog, optimizePerformance, setupFpsDisplay }","import { Color3, DirectionalLight, HemisphericLight, Scene, Vector3 } from '@babylonjs/core'\n\nconst setupLights = function(scene : Scene) : { sunLight : DirectionalLight, hemisphericLight : HemisphericLight } {\n  const light = new HemisphericLight('light', new Vector3(0, -1, 0),scene)\n  light.intensity = 2\n  light.groundColor = new Color3(148/255, 41/255, 60/255)\n  // light.setEnabled(false)\n\n  const dirLight = new DirectionalLight('dir', new Vector3(0, -1, 0), scene)\n  dirLight.position = new Vector3(5,5,0)\n  dirLight.setDirectionToTarget(new Vector3(0,0,0))\n  dirLight.intensity = 8\n  dirLight.diffuse = new Color3(255/255, 255/255, 153/255)\n  // dirLight.setEnabled(false)\n \n  return { sunLight : dirLight, hemisphericLight: light }\n}\n\nexport { setupLights }","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgBAMAAAAQtmoLAAAAFVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAASAQCkAAAAB3RSTlMAELo0yv/uOyK2GwAAANtJREFUeAFiGL5gFIyCUSBkgE2UWRGXekbXZGzCZiECODSIhIYZYLEgNdQRwNgcWAAQBEEQjOYTeib/VB5Q7zgasKZt3YANAdgOAjDEH9iFeLY/Adhe9zkhAN6EzZc7UQFrBMwRsFdAEAFFBSQR0FRAFAFVBWQRQFQAAYgEIBIRQAAiASgEIBOATnTga7e+DQCAQRgI7r81M1yJQu1skN4n4JH80vas8HFeGl58Xt7eQN6ibAJqM2hkYJVgxmD3ECgcWR6KHLsc7IwODCeMPwxYinAMiYyhsZqm6QCQI8VdIPm9HQAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/icon_tile_trampolin.0abc87bf.png\";","export default __webpack_public_path__ + \"static/media/icon_tile_boulders.9beaba10.png\";","export default __webpack_public_path__ + \"static/media/icon_tile_house.979ad51e.png\";","export default __webpack_public_path__ + \"static/media/icon_tile_caroussel.eb6967e7.png\";","export default __webpack_public_path__ + \"static/media/icon_tile_sandbox.4500cd63.png\";","export default __webpack_public_path__ + \"static/media/icon_tile_seasaw.2b302adb.png\";","export default __webpack_public_path__ + \"static/media/icon_tile_swings.a53ff613.png\";","export default __webpack_public_path__ + \"static/media/icon_tile_slide.773597b9.png\";","export default __webpack_public_path__ + \"static/media/icon_tile_tree.3eb7e8b6.png\";","export default __webpack_public_path__ + \"static/media/icon_tile_playhut.2ebb8dae.png\";","export default __webpack_public_path__ + \"static/media/icon_tile_empty.5c4600c8.png\";","export default __webpack_public_path__ + \"static/media/icon_tile_junglegym.89db69ee.png\";","export default __webpack_public_path__ + \"static/media/icon_tile_springs.47cf136a.png\";","import React, { useState } from 'react'\n\nimport { shuffle } from 'shuffle-seed'\nimport { SelectableTiles, TileType } from '../babylon/assets'\nimport { TileState } from '../babylon/tiles'\n\nimport './TileMenu.scss'\n\nimport closeIcon from './../assets/images/close.png'\nimport trampolinIcon from './../assets/images/icon_tile_trampolin.png'\nimport bouldersIcon from './../assets/images/icon_tile_boulders.png'\nimport houseIcon from './../assets/images/icon_tile_house.png'\nimport carousselIcon from './../assets/images/icon_tile_caroussel.png'\nimport sandboxIcon from './../assets/images/icon_tile_sandbox.png'\nimport seasawIcon from './../assets/images/icon_tile_seasaw.png'\nimport swingsIcon from './../assets/images/icon_tile_swings.png'\nimport slideIcon from './../assets/images/icon_tile_slide.png'\nimport treeIcon from './../assets/images/icon_tile_tree.png'\nimport playhutIcon from './../assets/images/icon_tile_playhut.png'\nimport emptyIcon from './../assets/images/icon_tile_empty.png'\nimport gymIcon from './../assets/images/icon_tile_junglegym.png'\nimport springsIcon from './../assets/images/icon_tile_springs.png'\n\nconst tileIcons: {type: SelectableTiles, icon: string, name: string}[] = [\n  { type: SelectableTiles.trampolin, icon: trampolinIcon, name: 'Trampolin' },\n  { type: SelectableTiles.boulders, icon: bouldersIcon, name: 'Felsen' },\n  { type: SelectableTiles.house, icon: houseIcon, name: 'Baumhaus' },\n  { type: SelectableTiles.carousel, icon: carousselIcon, name: 'Karoussel' },\n  { type: SelectableTiles.sandbox, icon: sandboxIcon, name: 'Sandkasten' },\n  { type: SelectableTiles.seasaw, icon: seasawIcon, name: 'Wippe' },\n  { type: SelectableTiles.swings, icon: swingsIcon, name: 'Schaukel' },\n  { type: SelectableTiles.slide, icon: slideIcon, name: 'Rutsche'  },\n  { type: SelectableTiles.tree, icon: treeIcon, name: 'Wald' },\n  { type: SelectableTiles.playhut, icon: playhutIcon, name: 'Spielhaus' },\n  { type: SelectableTiles.junglegym, icon: gymIcon, name: 'Klettergerüst' },\n  { type: SelectableTiles.springs, icon: springsIcon, name: 'Federwippe' }\n]\n\nconst TileMenu = function({tileState, onSelect, numberOfSelectedTiles, maximumSelectedTies, seed} : \n  {tileState?: TileState, onSelect : (t: TileType | undefined) => void, numberOfSelectedTiles: number, maximumSelectedTies: number, seed : number}) : React.ReactElement {\n  const [type, setType] = useState(tileState?.type)\n  const [shuffledTiles] = useState( shuffle(tileIcons, seed))\n  \n\n  function onClickedHandler(t: TileType | undefined) {\n    if (t) setType(t)\n    onSelect(t)\n  }\n\n  const canSelectedNewTile = (numberOfSelectedTiles < maximumSelectedTies) || type != SelectableTiles.grass\n\n  function renderTileLink(img: string, type: TileType, name: string, selected : boolean) {\n    return(\n      <li onClick={() => onClickedHandler(type)} key={type}>\n        <img src={img}/>\n        <span className=\"caption\">{name}</span>\n        { selected && <div className=\"selected\"></div> }\n      </li>\n    )\n  }\n\n  return (\n    <div className=\"TileMenu\">\n      <div className=\"overlay\" onClick={() => onClickedHandler(undefined)}></div>\n      <div className=\"dialog\">\n        <div className=\"dialog-header\">\n          <div className=\"close-button\" key=\"close\" onClick={() => onClickedHandler(undefined)}>\n            <img src={closeIcon}></img>\n          </div>\n          <p className=\"number-selected\">Elemente ausgewählt: {numberOfSelectedTiles} von {maximumSelectedTies}</p>\n        </div>\n        <div className=\"dialog-content\">\n          { canSelectedNewTile ?\n            <ul>\n              { renderTileLink(emptyIcon, SelectableTiles.grass, '', SelectableTiles.grass == type) }\n              { shuffledTiles.map((t) => renderTileLink(t.icon, t.type, t.name, t.type == type))}\n            </ul>\n            :\n            <p>Du hast schon {maximumSelectedTies} Elemente ausgewählt. Klicke ein bereits plaziertes Element an um es zu ändern oder zu löschen.\n              <span className=\"image\"><img src={emptyIcon}/></span>\n            </p>\n          }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport { TileMenu }\n","import React from 'react'\n\nimport './LoadingView.scss'\n\nconst LoadingView = function({ loaded, avatar, onStartClicked } : \n  { loaded : boolean, avatar?: string, onStartClicked: () => void }) : React.ReactElement {\n\n  return (\n    <div className=\"loading-view\">\n      <div className=\"content\">\n        <h1>Was soll auf deinem Spielplatz sein?</h1>\n        {/* <HintView avatar={avatar || ''}/> */}\n        <div className=\"loading\">\n          { !loaded && \n            <div>\n              <div className=\"spinner\"></div> \n              <p className=\"center\">Lade Spielplatz ...</p>\n            </div>\n          }\n          { loaded && <div className=\"start-button\"><button className=\"glow\" onClick={() => onStartClicked()}>Start</button></div> }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport { LoadingView }\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUGVYSWZNTQAqAAAACAACARIAAwAAAAEAAQAAh2kABAAAAAEAAAAmAAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAABgoAMABAAAAAEAAABgAAAAALvucVAAAAIwaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+OTY8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+OTY8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KROSRYQAAAd5JREFUeAHt3A1KxDAQBtAiqIfzKp5G7+G/11MzQmEpG0mwyezqE0JpCBl4X9J1beuy+CFAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgMBcgdtS7m5uSdVWgcD/KO2ztPu103GOwCF+BCCEOe7fVY7hC2FSAD/hC2FwCDdl/vWav2LXjj4TBoRxWeZ8KK2Gvu0XghAGCJzAlLETHkvbrvjauZ0wIDQhDEDtnTJCeCqttvK3/XZCr3DDeCE0II0eIoTRwg3zRwjPpW0vO7Vzl6MG1N4hV0LoJdt/fITwUlpt5W/77YT9M1iEMAC1d8oI4bW07YqvndsJvcIN44XQgDR6iBBGCzfMHyG8lVa7/Gz7XY4aUHuHXAuhl2z/8RHCe2nbFV87txP2z2A5uxAuBiCY8p8KnN3q/0s5+RBOTNOvocn4/iSRFIBvwUnwURZ+Mr57AkkBxMqHn4jvvnASvpvySfBR1mMp8BMFEktb+cn4npBOCiBWPvxEfG/JwE8SSC7rJb3kAKK811RPPARPMkwK6NhOgD8Jfy1zGAL8VWXyMULw72omoytHgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgMDvBL4A7mbRP/aPOvcAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUGVYSWZNTQAqAAAACAACARIAAwAAAAEAAQAAh2kABAAAAAEAAAAmAAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAABgoAMABAAAAAEAAABgAAAAALvucVAAAAIwaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+OTY8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+OTY8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KROSRYQAAAfJJREFUeAHt3AtKw0AUBVBR1IW4HLfianQf/qqbcFHqBC2E0Ka9kJeG5giBthneM+fONIU0vbjwR4AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIDAuQlcndsBDY7nsT2/a9vX4HVPZxB4aj1+2vbdtocZ+mnRE9jidwEIoQczx8MhvhDmUP/vsQ9fCDOEcAi/H8L9DP/Pqloci9+F8Ny261XpFB8s/GLgsfIJ/ksrZOaPaYb74IdgUw5P8F9bYzN/Qn34E2KmpeCnYhOOT/DfWl9vOyfEv5mw9+pLJTP/vWnBn3DKwJ8QMy2V4G/M/JR3fDz8cZ/SvfBLeceLJ/gfrZQT7rhntDfFv42qGzwqkOB/tkrwRzmznavGv8ysjD5XgVWvgqWEmoTQfQJyHihILg3Bx9ATh7Bp/YUghAKBBZRM3o6shKLAkhBcCxBCkcACyiYrobse7MRcEFoagovyJw7BF7IKAuhKJitBCEIoElhA2WQl+GZ0UWBCKIJNyiYhuDsmkQ3GCiHAqhp6bAjdjdtu0itK4VAI7povgu+X3RcC/L5S8eNhCPCLwXeV34YAf5fOTK91P1fjl1JmwtaGAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIE/gV9WUdHDYZOqtAAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/icon_tile_grass.8f0318db.png\";","export default __webpack_public_path__ + \"static/media/fertig.cc7557ea.png\";","import React, { useEffect, useState } from 'react'\n\nimport './HintView.scss'\n\nimport nextIcon from './../assets/images/next.png'\nimport previousIcon from './../assets/images/previous.png'\n\nimport grassIcon from './../assets/images/icon_tile_grass.png'\nimport emptyIcon from './../assets/images/icon_tile_empty.png'\nimport closeIcon from './../assets/images/close.png'\nimport fertigIcon from './../assets/images/fertig.png'\n\nconst hints : {text: string, img?: string }[] = [\n  { text: 'Hey, ich habe hier ein paar Tips für dich, wie du deinen Spielpatz baust.' },\n  { text: 'Suche dir 6 Dinge aus, die du gerne auf einem Spielplatz haben willst. Klicke auf ein leeres Feld um dort etwas zu bauen.', img: grassIcon},\n  { text: 'Wenn du auf ein bebautes Feld klickst, kannst du es entfernen oder zu etwas Anderem ändern. Baum-, Allee- und Wasserfelder lassen sich nicht verändern.', img: emptyIcon},\n  { text: 'Du kannst die Ansicht drehen und näher heranzoomen. Wenn du zufrieden bist, drücke oben rechts auf Fertig.', img: fertigIcon}\n]\n\nconst HintView = function({onClose, avatar, startHint = 0} : { onClose?: () => void, avatar: string, startHint? : number}) : React.ReactElement {\n  \n  const [ hintIndex, setHintIndex] = useState(0)\n\n  useEffect(() => {\n    setHintIndex(startHint)\n  },[startHint])\n\n  function onNextClicked() {\n    setHintIndex(hintIndex + 1)\n  }\n\n  function onBackClicked() {\n    setHintIndex(hintIndex - 1)\n  }\n\n  return (\n    <div className=\"hint-view\">\n      { onClose && <div onClick={onClose} className=\"overlay\"></div> }\n      <div className=\"hint-dialog\">\n        { onClose && \n          <div className=\"close-button\" key=\"close\" onClick={onClose}>\n            <img src={closeIcon}></img>\n          </div>\n        }\n        {hints[hintIndex].text}\n        { hints[hintIndex].img && <span className=\"image\"><img src={hints[hintIndex].img}/></span> }\n        <div className='buttons'>\n          <button disabled={hintIndex < 1} onClick={onBackClicked}><img src={previousIcon}/></button>\n          <button disabled={hintIndex > hints.length -2} onClick={onNextClicked}><img src={nextIcon}/></button>\n        </div>\n        <div className=\"floating-image\"><img src={avatar}/></div>\n      </div>\n    </div>\n  )\n}\n\nexport { HintView }\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAADoklEQVR42u1aXUgVQRT+rr/4c73aD9hDVNRbEIQFPZT2kkRE1Ev0kL1EEEQalBL9EFiSGFL4kAWFRFBaVBZRPfRzzfzpFvkYBUYRZWWloFBhOj2st64ze+/Oemfu7qH55m05e+b7dndmzzlzAAMDg1TgCHX6jDp9Rp0+o06fUafPqNNn1Okz6vQZdfqMOn1GnT6jTp/hIvZhPYqo0o+OCURQhyVU6f8bfahELl361hjEIRTQpW+NAWyjTN8aHZjnLf1c9CUlgGEIm72VMAPPk5TAUIeAlxIK0etA8DDC+JnQohVZXkoowJOE9KyPrRznEsi4gQwvJeSjw0GAhTlowHAcqzakebuc70sIsN5Xcxy74zoJLkWhg0UO7kkHc+vw0TbY2KLvE+lHBCEHq2zclo5GZ+KujeUIFugRYL30XkcJWWiXDqftbcM6ttRyTEy673GMYDJwVTofyMQ1Gwk7VdNPx6sY990IOtpflk5oMnBHEPDZcQaXqOAm6JKQcEE6I5tls5yP6Xv+DAzjKHG8Kw3npVPKNRjnZhhW+Q4qhOfTJHVfAGekc+JGYY4qdQI6OddfpBORAJokBeTjEzfLa1X05/7df6LjgKv7GyWrEpXCO1imRsBeIXoPufRQLyUgD0PcTA1qBDzl3J6dho9aKatT3Ewv1QQQ/P6wWlustUKIi2Yn73SlsID1BbwBfOBm25S8092cy5taA/JWbrba5F22cC73axXA70SXQAzlnIAINQGLOAHvqAko4gR8oyYgixPwywgwn9B/tog1bKPkf2S8y3ZqocQqoV5ALJgLCuF0Ka1wGnjGuT2tTYCWhAao5tx+V1100p1SzheS+uqU7EDKknoIx0cDyFNOX2NZBdguPJsTygXU6yxsZeIN53wMi5XSL8GYztIisINz/1Bpp0NIqL0qLu4CmXgb4/yRUvrpuKW/vA5siDk/UbmEA1Nq2NoOOABM1vsfK6Wfbks/rOfUvhDv0amUfsj2QFDbIR+wHPm2wtZO01t/ao9Z4z3FCBiuoNhliHgSv1N/0G1HP/qXHkWjpIggavDVH60GBeiZMv0PtGEjshMs2TI0Y8QvzR5BdNvSGMUDHBWsa3Adg35qtwmiy7G9Jha+a3gqi/sduxfgUctZsW2fg3sBnjb9bRWieHcCfNB2mYM9tn0/zgJ81PiajV144UqAD1uPgYU4GCPDXoCvm7+jP7dSVKFFuE6i/d7AwMDAwMDAwMDAgBL+AGKfDnNn9UmhAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAADuElEQVR42u2aW2iPYRzHPzuK7b+DQ0hCuUU5lAuHK5JJIXIhJU1utt2MJBK2zLIscriwNMwmxyQUQk7byO6IIoe2OW/swrTxuKDF857fPa/3/+T57m69/9/v+3n/7/P+f7/f84CRkVE02qI7gNAdQeiOIHRHELojCN0RhO4IQncEoTuC0B1B6I4gdEXIp4BSjjgAJDXCBMpo4oej9SRGGEgRDz2NJylCgo28C2A+yRBW0BrYfNIgjOZ6SPNJgbCET/2yL2hhUHz2t/XTvOABg+Myn8ExV2vvOcN6D/uN5MVlP41Tjra6OMBs0lx+iX/93SYnLvup1DmY+sB6Ep6lhEBwk+z4nv3ttpZ62f2XeTeAq3Eu3aW2hcIzpvku5i4z0CNHtm00JRrDZxtLF8j1XY1eYICn/du8jmaBp3DNxlLN7yXrB+AcmT7sCwS1UQAU2tpP8d0PnCTdp32BYKFq+9m0Wyydd7z7VoB612tl+4IXZKgF2Gqx/8Th2bcDqA1oXyAoVHv/O6TwPUzx3VLWkOqZYTK9UobnKr+DIsv9r/DdEx90WSd/qtqSY7U6gCdS6Dc+fkt/XbnHp327Vdaoyv4Uy70p9jmVqAqURy4AfzBWDcBOKXAHWb4AKgLmSfBRyrRODcAjKWy1z44huPZLme6rsD/MUv9Mj6zWmiVl+m4pEUNokRS01feyDFOsv5WyzVTfPDZEWu+eC/G68NBx9SFdtEHKdrj/IZukkHPRTC8lgPG6Acjv5nzdAL5JAJkGwDxC/9kibtb9Nar9D5n2pcS/LebeqC/mtC+n4XGohiaM9kXR0EBlqJYyzPAmopZyaqimPrhKo2rq4WmIsUpQZdEW1VgFSizfQZVygF1RDrYSdFreD3OU2p9ET5SjRSiz3J82hiqMn2cpWQrVfsEJy7xAcNFz4h9EuTRGOV6HtTYbHKeVpsnlXnQbHJDCjVDbRkGUw93otphgHF02CJcYovRRvRPVJh/Acttt1jbmh4o2z9ZoIrptVoAdDvu/BwIeHhjBCQTN//7ERConHBA6qWSkrxjDqex7GGNASOes4zGCbg4x1+UoQQYF1PH1r8/EgJBJg+tZlG5usNmms7vCF9vrY0BIodzzQJMst2ub4zg9tMyy9RoeoJ0ZccwrxnBTCUB9fIfPYKXNEYQgAK9YHPfcKIdNvA8F8Jw1yTJpHUQxLYEAbrFKaS2rRBMpp7mv2LAH6OUWJYxK5lFkPgso5ajl/3tZw2TPE1tGRkZGRkZGRkZGRka+9RMvPQ3cdWcvogAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/pool.4d935788.png\";","export default __webpack_public_path__ + \"static/media/stream.81d28d94.png\";","import React, { useEffect, useState } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport { PlayGroundType } from '../state'\n\nimport './WaterbodyView.scss'\n\nimport poolImg from './../assets/images/pool.png'\nimport streamImg from './../assets/images/stream.png'\nimport checkIcon from '../assets/images/check.png'\nimport backIcon from '../assets/images/arrow_back.png'\nimport { shuffle } from 'shuffle-seed'\n\nconst descriptions = new Map<PlayGroundType,{title: string, text: string, img: string}>()\n\ndescriptions.set('pool', {\n  title: 'Plansche',\n  text: 'Ein großes Wasserbecken in dem du herumlaufen und planschen und spritzen kannst.',\n  img: poolImg\n})\n\ndescriptions.set('river', {\n  title: 'Bach',\n  text: 'Einen Bach mit Strömung und Wasserfällen in dem du Staudämme bauen kannst und Boote schwimmen lässt und mit dem Wasser spielst.',\n  img: streamImg\n})\n\nconst WaterbodyView = function({ onSelect, seed } : { onSelect: (type: PlayGroundType) => void, seed: number }) : React.ReactElement {\n  const history = useHistory()\n  const [selected, setSelected] = useState<PlayGroundType|undefined>()\n\n  const waterbodies = shuffle<PlayGroundType>(['pool', 'river'], seed)\n\n  function onWaterbodySelect(type: PlayGroundType) {\n    setSelected(type)\n  }\n\n  const { pathname } = useLocation()\n  useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [pathname])\n\n  function onConfirm() {\n    if (selected)\n      onSelect(selected)\n    history.push('/playground')\n  }\n\n  function onReject() {\n    setSelected(undefined)\n  }\n\n  function renderWaterbody(type: PlayGroundType) : JSX.Element {\n    return(\n      <div key={type} className=\"waterbody\" onClick={() => onWaterbodySelect(type)}>\n        <div className=\"icon\">\n          <img src={type == 'pool' ? poolImg : streamImg }/>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"waterbody-view\">\n      <h1>Wie soll dein Spielplatz ausehen?</h1>\n      <p className=\"block\">\n      Es soll ein Spielplatz mit viel Wasser sein ...\n      </p>\n      <div className=\"waterbody-list\">\n        { waterbodies.map((w) => renderWaterbody(w)) }\n      </div>\n      { selected && \n        <div className=\"water-select-dialog\">\n          <div className=\"overlay\"></div>\n          <div className=\"dialog\">\n            <h2>{descriptions.get(selected)?.title}</h2>\n            <img src={descriptions.get(selected)?.img}></img>\n            <p>{descriptions.get(selected)?.text}</p>\n            <div className=\"button-group\">\n              <button className=\"round\" onClick={onReject}><img src={backIcon}></img></button>\n              <button className=\"round\" onClick={onConfirm}><img src={checkIcon}></img></button>\n            </div>\n          </div>\n        </div>\n      }\n    </div>\n  )\n}\n\nexport { WaterbodyView }\n","export default __webpack_public_path__ + \"static/media/missingtile.ac7b0a15.png\";","import React, { useEffect, useState } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport './MissingTileView.scss'\n\nimport missingImage  from './../assets/images/missingtile.png'\nimport sendIcon from './../assets/images/send.png'\n\nconst MissingTileView = function({ onSubmit, initial } : { onSubmit: (text: string) => void, initial: string }) : React.ReactElement {\n  const history = useHistory()\n  const [text, setText] = useState(initial)\n\n\n  function onFinishedClicked() {\n    onSubmit(text)\n    history.push('/finished')\n  }\n\n  const { pathname } = useLocation()\n  useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [pathname])\n  \n\n  return (\n    <div className='missingtile-view'>\n      <h1>Fehlt dir noch etwas?</h1>\n      <div className=\"image\"><img src={missingImage}/></div>\n      <p className=\"block\">\n        Du hast deinen Spielplatz eingerichtet. Wünschst du dir noch ein Spielgerät oder Spielsache an die wir nicht gedacht haben? Dann schreibe uns deinen Wunsch auf.\n      </p>\n      <div className=\"text-field\">\n        <textarea\n          placeholder=\"Schreibe hier was dir noch fehlt.\"\n          value={text}\n          onChange={(e) => setText(e.target.value)}>\n        </textarea>\n      </div>\n      <div className=\"center\">\n        <button onClick={() => onFinishedClicked() }>Abschicken<img className=\"right\" src={sendIcon}/></button>\n      </div>\n    </div>\n  )\n}\n\nexport { MissingTileView }\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAACr0lEQVR42u2bPU8UQRjHf3iItlwkUVtsMTEY32q1JwESzrcO+QJAsFHUROQTeBRY+QLyCdBogY14VBY2GCUhAZuz8gXwWItjI8wet7OwOzPPMf8pbya7/3t+uzvzzDPg5eXl5eXl5eX1X3Pc4ohkAz8J+M5DTko18IuAgIB1prgk2UC1leQBtdNAIA+o3xEDVaBeclGygRCom+4DVc9AFagHbgP1J8aA80DpGHAaqDVtAyFQJyQbCIG64K6BPt5q2fjIDTeAWldu7CjQQbHGBy7aVrlvHyjVQPiv5hnkmxZQL+wCpRpo2fZbjq4EQLXYMbCh3MrhSA/HgVINNNfspQvUmnmgVAO5XXvm6OKde0D9VS7eFNO/gwm3gFIN6CjPIEuaQJ3P2kBFuWiZEtOMcZsrtNeJRxKgrmcJVKXuxTf5wmuKDNPLWfKR0ae1gRrNCqhKonnQDxaYYZwBrnJq64HXB+p5FkBtJp7MbW9fecMEIxR4xCetEfNpA7U/A3trq4xyXLKBVIEKrLZ5ru0XqFY66WaIJ8yyaCUeK9xLD6gm2rlMP2NMU6JsEKhnnMviJWs2PikAZT8+qQJlKz6ZAWU2Ph8o2FrlpRefFe6aAyqr+FgCqgEMiENI4EMs7jUq8EMmbiohcDInfjotfkEjfkl5wBf1YdqrwDif7aRVkiW2yizwisdbicdDALRxh2V7ia241OIisxQZpodOWiOjz/A0dq/fcGoxTO72xyR3m+nhvQvJ3b2k1/WhMZBeT2pAHxpDGxwb2gaSQGNwi0nPQBsj2tBY3uSrBc2kW9DU3+hWoZlzfaN7NwPHNKFxrtRAADQ7pZbbdCeAxolym4YreBJXcia+6E982aX4wtcGLT0WVPwtvvy+YQ5AiD2CIv4QkPhjWF5eXl5eXl5eB0f/AJoL3GU1FFESAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/thankyou.9b3f9fd0.png\";","import React, { useEffect } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport './FinishedView.scss'\n\nimport thankyouImg from './../assets/images/thankyou.png'\nimport replayIcon from './../assets/images/replay.png'\n\nconst FinishedView = function() : React.ReactElement {\n  const history = useHistory()\n\n  const { pathname } = useLocation()\n  useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [pathname])\n\n  return (\n    <div className='finished-view'>\n      <h1>Dankeschön!</h1>\n      <div className=\"image\"><img src={thankyouImg}/></div>\n      <div className=\"block\">\n        Danke, dass du uns gezeigt hast was du gut findest und dir auf dem Spielplatz wünschst.<br/>\n        Wenn viele Kinder uns sagen, was sie gerne wollen, können wir einen besseren Spielplatz für euch bauen. Also erzähle deinen Freunden und Nachbarn von dem Spiel!\n        <div className=\"center\" onClick={() => history.push('/')}><button>Neues Spiel<img className=\"right\" src={replayIcon}/></button></div>\n      </div>\n      \n      <div className=\"impressum\">\n        <button onClick={() => history.push('/impressum')}>Impressum</button>\n      </div>\n    </div>\n  )\n}\n\nexport { FinishedView }\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAACtUlEQVR42u1avU4yQRQ9G4INSGKMiT08AZrwCsaWaK8voEFblV7o6KxVWhqfwE4rEysKOo0aCjtD4f2KTwrnzsIiO7tzkjnbwt1zdn7uLxAQEOASF+z0hZ2+sNMXdvrCTl/Y6Qs7fWGnL+z0hZ2+sNMXdvrCTl/Y6Qs7fWGnLxC8YIRH3OIMTWzw0TefJ3SwzUt/+jzjBKu89P8/Y7SxxixAIPjAASJuCYJ7VNklfGKfXYKgm9dWmu/INlHDLo7Qx9vMX96g6H8o0UAP49jf3vkoQaOEFl5jV8G7jWRHGZeYxJwFmoSmjqH1H3s8KWUFA+ul6pVfmI0CrqyuzSPvPB82CYdMha2CZSO9+xPmJUHFcpzbvoTayVBXl+o433xh8fJ6R63BqR8JT1KU8aKyNi9SzuRoqTXY8kFCcpRUmNcF8pewCHqqgkGGhiHg27c60jxEKuVpsq1B3xBwzibg2BBwzSZgxxDwwCagZggYsQlYV5U7MqwYAr6WN/llmFxhE/BhmFxn20Ijw2SN7RA/GCZ32K7Ra8PkMZsjOzdM9tlCiaZh8s1hzcZJMLeBb8Nogy2cfjLM9pwJcJTQdFXBo+SEvrOUcksl2y0nAhwm9c9qeKCcOn2nZZVT9W06qQtwWthaVbtzgnqq9J2XFtvq+wxRSc16BsXdNbyrVwxQSMV2RuX1Q0sb4ioVyxk1OCLcWyUUlvz6GbaYqvi0vGywxFnIvMm3Z+1DDv94I+XSZu1aXznB5YKuLbdGd4SbmIb2K1oJY6ScRw2KuJsxRNabE2x7MexRjF2FacrTxxF2UcMmAC/HbaKYs0A18LRvvVSpRs6qVtdGNfQX4UBV7ojGLqdhXnvGveLx4OvvfOFEZW3ejx5rbKOjKhheD3/H1ZGaOMMtHjH6yXI9Hr8PCAgICAgICODGP+UaqR1t9OXXAAAAAElFTkSuQmCC\"","import React, { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router'\n\nimport './StartView.scss'\n\nimport playIcon from './../assets/images/play.png'\n\nconst StartView = function({onStart} : { onStart? : () => void}) : React.ReactElement {\n  const history = useHistory()\n  const [animate, startAnimation] = useState(false)\n\n  function onButtonClicked() {\n    if (onStart) onStart()\n    history.push('/avatar')\n  }\n\n  // animate after certain time\n  useEffect(() => {\n    setTimeout(() => {\n      startAnimation(true)\n      window.scrollTo(0, 0)\n    },3000)\n  },[])\n\n  return (\n    <div className=\"start-view\">\n      <div className={ animate ? 'logo fade-out' : 'logo' }>\n        <video width=\"500\" height=\"250\" autoPlay loop muted>\n          <source src=\"/assets/videos/logo.mp4\" type=\"video/mp4\"/>\n        </video>\n      </div>\n      <div className=\"content\">\n        <div className=\"block\">\n          <h1>Der Spielplatz im Schillerkiez</h1>\n          Wir wollen in eurer Nähe einen neuen Spielplatz bauen. Und zwar nahe beim Tempelhofer Feld auf dem alten Friedhof neben dem Park, auf einer großen Wiese zwischen den Bäumen. Es soll viel Wasser zum Planschen geben und lustige Sachen zum Spielen.<br/>\n          Kannst du uns dabei helfen?<br/>\n          Was tust du gerne? Rennen und springen? Höhlen bauen? Mit anderen Kindern spielen?\n          Such dir deine Figur aus und komm mit einen tollen Spielplatz zu planen.<br/>\n          <span className=\"center\">\n            <button onClick={onButtonClicked}>Start<img className=\"right\" src={playIcon}/></button>\n          </span>\n        </div>\n        <div className=\"impressum\">\n          <button onClick={() => history.push('/impressum')}>Impressum</button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport { StartView }\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAABWUlEQVR4Ae3cAUYAUQAE0CoqIAWICCCiAwQ6QiA6QRA6QRDdICB0gSB0gYgOEAkgJJACRWpg/RNkyHsMATDUtLv/zwAAAAAAAADAH7pK1hJKfpK35DCZTSgUMOU22UwoFDDlMzlJFpICBUx5SHaSAgVM+U7Ok+WkQAFTnpO9pEABI93JqoDyZFVAebIqoDxZFVCerAooT1YFdCarAh7Hz43JqoDF5DT5akxWBQxbyV1jsipgmEuOkvfGZFXAsJ5ctyarAob95KUxWRUwrCQXrcmqgGE3eWpMVgUMS8lZa7IqYNhO7huTVQHDfHKcfDQmqwKGjeSmNVkVMBwkr43JqoBhNbk0WRXQ51dQnz/CZqgZ6h+xPo8i2jyM8zi6xwsZvJL0Uv7/81mKD7PwaaKPc/F5ugMaOKLkkB6OqTqojasKXNaB62pc2MT/m5Yu7cO1lQAAAAAAAADwCxytsQDtG2PEAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/lighttower.7dcd6c2e.png\";","import React, { useEffect } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport './ImpressumView.scss'\n\nimport lighttowerImg from './../assets/images/lighttower.png'\n\nconst ImpressumView = function() : React.ReactElement {\n  const history = useHistory()\n\n  const { pathname } = useLocation()\n  useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [pathname])\n\n  return (\n    <div className='impressum-view'>\n      <h1>Impressum</h1>\n      <div className=\"image\"><img src={lighttowerImg}/></div>\n      <p className=\"block\">\n        <h2>Auftraggeber des Projektes</h2>\n\n        <span className=\"paragraph\">\n          Diakonisches Werk Berlin Stadtmitte e.V.<br/>\n          Geschäftsstelle, Wilhelmstraße 115, 10963 Berlin<br/>\n          <a href=\"https://www.diakonie-stadtmitte.de\">www.diakonie-stadtmitte.de</a>\n        </span>\n\n        <span className=\"paragraph\">\n        Projektleitung: <br/>\n        Katarina Henkys: <a href=\"https://www.gartenplan.berlin/\">www.gartenplan.berlin</a><br/>\n        Karola Reiter\n        </span>\n\n        <span className=\"paragraph\">\n        Design und Implementierung: <br/> \n        Sidra Ashraf: <a href=\"https://www.sidra-ashraf.com/\">www.sidra-ashraf.com</a><br/>\n        Lutz Reiter: <a href=\"http://www.lu-re.de/\">www.lu-re.de</a>\n        </span>\n      </p>\n      <div className=\"center\" onClick={() => history.push('/')}><button>Zurück zum Spiel</button></div>\n      \n    </div>\n  )\n}\n\nexport { ImpressumView }\n","import React, { useEffect, useState } from 'react'\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom'\n\nimport { PlaygroundSettings } from './babylon/playground'\nimport { Actions, State, Statemachine } from './state'\n\nimport './App.scss'\nimport { AvatarView } from './components/AvatarView'\nimport { PlaygroundView } from './components/PlaygroundView'\nimport { WaterbodyView } from './components/WaterbodyView'\nimport { MissingTileView } from './components/MissingTileView'\nimport { FinishedView } from './components/FinishedView'\nimport { StartView } from './components/StartView'\nimport { ImpressumView } from './components/ImpressumView'\n\nconst API_ADDRESS = '/api/results/'\nconst SIZE = 8\nconst SETTINGS : PlaygroundSettings = {\n  gridSize: SIZE,\n  width: SIZE*0.9,\n  height: SIZE*0.9,\n  camera: {\n    zoom: 5\n  },\n  version: '0.40',\n  selectableTiles: 6\n}\n\nconst App = function() : React.ReactElement {\n  const [stateMachine, setStateMachine] = useState<Statemachine>()\n  const [currentState, setCurrentState] = useState<State>()\n\n  // setup statemachine and load state\n  useEffect(() => {\n    setStateMachine(new Statemachine(SETTINGS))\n  },[])\n\n  // update state\n  useEffect(() => {\n    setCurrentState(stateMachine?.state)\n    const subscription = stateMachine?.subscribe((state) => {\n      setCurrentState(state)\n    })\n    return () => {\n      subscription?.unsubscribe()\n    }\n  }, [stateMachine])\n\n  async function onSubmit() {\n    fetch(API_ADDRESS, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(stateMachine?.state)\n    }).catch( (err) => {\n      console.error(err)\n    }).then(() => {\n      stateMachine?.reset()\n    })\n  }\n\n\n  return (\n    <div className='App'>\n      <Router>\n        <Switch>\n          <Route path=\"/avatar\">\n            <AvatarView onSelect={(a) => stateMachine?.trigger(Actions.setAvatar, {avatar: a})} seed={currentState?.seed || 0}/>\n          </Route>\n          <Route path=\"/waterbody\">\n            <WaterbodyView onSelect={(t) => stateMachine?.trigger(Actions.setPlaygroundType, {type: t})} seed={currentState?.seed || 0}/>\n          </Route>\n          <Route path=\"/playground\">\n            { stateMachine && <PlaygroundView stateMachine={stateMachine} settings={SETTINGS}/> }\n          </Route>\n          <Route path=\"/missing-tile\">\n            <MissingTileView \n              initial={currentState?.missing || ''}\n              onSubmit={(t) => { stateMachine?.trigger(Actions.setMissingText, { text: t}); onSubmit() }}/>\n          </Route>\n          <Route path=\"/finished\">\n            <FinishedView/>\n          </Route>\n          <Route path=\"/impressum\">\n            <ImpressumView/>\n          </Route>\n          <Route path=\"/\">\n            <StartView/>\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}